<html>
<head>
<title>
Dwarven Guidance Counselor
</title>
<style>
div.guidances {
	margin-bottom: 1em;
}
ul {
	width: 60em;
}
ul li {
	float: left;
	width: 20em;
}
br, p {
	clear: left;
}

.color .superb {
	color: indigo;
	font-weight:bold;
	cursor:pointer;
}
.color .verygood {
	color: #5533FF;
	font-weight:bold;
	cursor:pointer;
}
.color .good {
	color: steelblue;
	font-weight:bold;
	cursor:pointer;
}
.color .highavg {
	color: yellowgreen;
	font-weight:bold;
	cursor:pointer;
}
.color .lowavg {
	color: #BBBB22;
	font-weight:bold;
	cursor:pointer;
}
.color .poor {
	color: orange;
	font-weight:bold;
	cursor:pointer;
}
.color .verypoor {
	color: chocolate;
	font-weight:bold;
	cursor:pointer;
}
.color .horrible, .color .error {
	color: red;
	font-weight:bold;
	cursor:pointer;
}
</style>
<script type="text/javascript">
<!--
var dwarves = [];
var defaultDwarf = {
	attributes: {
		"strength": 1250,
		"musicality": 1000,
		"agility": 900,
		"empathy": 1000,
		"toughness": 1250,
		"social awareness": 1000,
		"endurance": 1000,
		"disease resistance": 1000,
		"recuperation": 1000,
		"analytical ability": 1250,
		"memory": 1250,
		"creatvity": 1250,
		"intuition": 1000,
		"focus": 1500,
		"willpower": 1000,
		"patience": 1250,
		"spatial sense": 1500,
		"kinaesthetic sense": 1000,
		"linguistic ability": 1000
	},
	traits: {
		"emotionality": 50,
		"excitement seeking": 50,
		"friendliness": 50,
		"gregariousness": 50,
		"achievement striving": 50,
		"imagination": 50,
		"activity level": 50,
		"immoderation": 55,
		"adventurousness": 50,
		"intellectual curiosity": 50,
		"artistic interest": 50,
		"self-consciousness": 50,
		"assertiveness": 50,
		"self-discipline": 50,
		"cheerfulness": 50,
		"straightforwardness": 55,
		"cooperation": 50,
		"sympathy": 50,
		"depression": 50,
		"trust": 50,
		"dutifulness": 50,
		"vulnerability": 45,
		"altruism": 50,
		"liberalism": 50,
		"anger": 50,
		"modesty": 50,
		"anxiety": 50,
		"orderliness": 50,
		"cautiousness": 50,
		"self-efficacy": 50
	}
}

var jobSkills = {
    'socializer': ['socializing'],
    'ranged combat dwarf': ['ranged'],
    'close combat dwarf': ['close'],
    'balance': ['balance'],
    'coordination': ['coordination'],
    'speaker': ['speaking'],
    'reader': ['reading'],
    'writer': ['writing'],
    'wordsmith': ['wordsmith'],
    'poet': ['poet'],
    'disciplinarian': ['disciplinarian'],
    'tracker': ['tracking'],
    'druid': ['druid'],
    'military tactician': ['military tactician'],
    'student': ['student'],
    'observer': ['observation'],
    'concentrator': ['concentrator'], 
    'liar': ['lying'],
    'judge of intent': ['judging intent'],
    'intimidator': ['intimidation'],
    'comedian': ['comedy'],
    'wrestler': ['wrestling'],
    'dodger': ['dodging'],
    'biter': ['bitting'],
    'armor user': ['armor'],
    'record keeper': ['record keeping'],
    'organizer': ['organization'],
    'building designer': ['building design'],
    'appraiser': ['appraisal'],
    'knapper': ['knapping'],
    'swimmer': ['swimming'],
    'alchemist': ['alchemist'],
    'siege operator': ['siege operation'],
    'siege engineer': ['siege engineering'],
    'pump operator': ['pump operation'],
    'mechanic': ['machinery'],
    'strand extractor': ['strand extracting'],
    'wood crafter': ['wood crafting'],
    'weaver': ['weaving'],
    'stone crafter': ['stone crafting'],
    'leatherworker': ['leatherworkering'],
    'glassmaker': ['glassmaking'],
    'clothier': ['clothiing'],
    'bone carver': ['bone carving'],
    'gem setter': ['gem setting'],
    'gem cutter': ['gem cutting'],
    'weaponsmith': ['weaponsmithing'],
    'metalsmith': ['metalsmithing'],
    'metal crafter': ['metal crafting'],
    'furnace operator': ['furnace operation'],
    'armorsmith': ['armorsmithing'],
    'fisherdwarf': ['fisherdwarf'],
    'fish dissector': ['fish dissecting'],
    'fish cleaner': ['fish cleaning'],
    'wood burner': ['wood burning'],
    'thresher': ['threshing'],
    'tanner': ['tanning'],
    'soaper': ['soap making'],
    'potash maker': ['potash making'],
    'miller': ['milling'],
    'milker': ['milking'],
    'lye maker': ['lye making'],
    'herbalist': ['herbalist'],
    'grower': ['growing'],
    'dyer': ['dying'],
    'cook': ['cooking'],
    'cheese maker': ['cheese making'],
    'butcher': ['butchery'],
    'brewer': ['brewery'],
    'wound dresser': ['wound dressing'],
    'suturer': ['suturing'],
    'surgeon': ['surgery'],
    'diagnostician': ['diagnostics'],
    'crutch walker': ['crutch'],
    'bone doctor': ['bone setting'],
    'trapper': ['trapping'],
    'animal trainer': ['animal training'],
    'animal dissector': ['small animal dissection'],
    'animal caretaker': ['animal caretaking'],
    'ambusher': ['ambushing'],
    'mason': ['masonry'],
    'engraver': ['engraving'],
    'wood cutter': ['wood'],
    'carpenter': ['carpenter'],
    'bowyer': ['bowyer'],
    'miner': ['mining']
};
var jobSkills = {
    'socializer': ['socializing'],
    'ranged combat dwarf': ['ranged'],
    'close combat dwarf': ['close'],
    'balance': ['balance'],
    'coordination': ['coordination'],
    'speaker': ['speaking'],
    'reader': ['reading'],
    'writer': ['writing'],
    'wordsmith': ['wordsmith'],
    'poet': ['poet'],
    'disciplinarian': ['disciplinarian'],
    'tracker': ['tracking'],
    'druid': ['druid'],
    'military tactician': ['military tactician'],
    'student': ['student'],
    'observer': ['observation'],
    'concentrator': ['concentrator'], 
    'liar': ['lying'],
    'judge of intent': ['judging intent'],
    'intimidator': ['intimidation'],
    'comedian': ['comedy'],
    'wrestler': ['wrestling'],
    'dodger': ['dodging'],
    'biter': ['bitting'],
    'armor user': ['armor'],
    'record keeper': ['record keeping'],
    'organizer': ['organization'],
    'building designer': ['building design'],
    'appraiser': ['appraisal'],
    'knapper': ['knapping'],
    'swimmer': ['swimming'],
    'alchemist': ['alchemist'],
    'siege operator': ['siege operation'],
    'siege engineer': ['siege engineering'],
    'pump operator': ['pump operation'],
    'mechanic': ['machinery'],
    'strand extractor': ['strand extracting'],
    'wood crafter': ['wood crafting'],
    'weaver': ['weaving'],
    'stone crafter': ['stone crafting'],
    'leatherworker': ['leatherworkering'],
    'glassmaker': ['glassmaking'],
    'clothier': ['clothiing'],
    'bone carver': ['bone carving'],
    'gem setter': ['gem setting'],
    'gem cutter': ['gem cutting'],
    'weaponsmith': ['weaponsmithing'],
    'metalsmith': ['metalsmithing'],
    'metal crafter': ['metal crafting'],
    'furnace operator': ['furnace operation'],
    'armorsmith': ['armorsmithing'],
    'fisherdwarf': ['fisherdwarf'],
    'fish dissector': ['fish dissecting'],
    'fish cleaner': ['fish cleaning'],
    'wood burner': ['wood burning'],
    'thresher': ['threshing'],
    'tanner': ['tanning'],
    'soaper': ['soap making'],
    'potash maker': ['potash making'],
    'miller': ['milling'],
    'milker': ['milking'],
    'lye maker': ['lye making'],
    'herbalist': ['herbalist'],
    'grower': ['growing'],
    'dyer': ['dying'],
    'cook': ['cooking'],
    'cheese maker': ['cheese making'],
    'butcher': ['butchery'],
    'brewer': ['brewery'],
    'wound dresser': ['wound dressing'],
    'suturer': ['suturing'],
    'surgeon': ['surgery'],
    'diagnostician': ['diagnostics'],
    'crutch walker': ['crutch'],
    'bone doctor': ['bone setting'],
    'trapper': ['trapping'],
    'animal trainer': ['animal training'],
    'animal dissector': ['small animal dissection'],
    'animal caretaker': ['animal caretaking'],
    'ambusher': ['ambushing'],
    'mason': ['masonry'],
    'engraver': ['engraving'],
    'wood cutter': ['wood'],
    'carpenter': ['carpenter'],
    'bowyer': ['bowyer'],
    'miner': ['mining']
};


var changelog = [""];



var superbClass = 'class="superb"';
var verygoodClass = 'class="verygood"';
var goodClass = 'class="good"';
var highavgClass = 'class="highavg"';
var lowavgClass = 'class="lowavg"';
var poorClass = 'class="poor"';
var verypoorClass = 'class="verypoor"';
var horribleClass = 'class="horrible"';

var xmlDoc;
var dwarfnames = [];
var dwarfnum;
var microsoft;
var currentDwarf;

var superbname = [];
var verygoodname = [];
var goodname = [];
var highavgname = [];
var lowavgname = [];
var poorname = [];
var verypoorname = [];
var horriblename = [];
var deekname = [];

/*Alias for getElementById*/
function $(id) {
	return document.getElementById(id);
};

/*So we can clone the default dwarf*/
Object.create = function (o) {
	function F() {}
	F.prototype = o;
	return new F();
};

function disableEnterKey(e) {
    var key;
    if (window.event) key = window.event.keyCode; //IE
    else key = e.which; //firefox
    return (key != 13);
}

function disablebodyenter(e) {
    var key;
    if (window.event) key = window.event.keyCode; //IE
    else key = e.which; //firefox
    if (key == 13) {
        directBodySubmit();
        $("directbodynum").value = ""
    };
    return (key != 13);
}

function disablesoulenter(e) {
    var key;
    if (window.event) key = window.event.keyCode; //IE
    else key = e.which; //firefox
    if (key == 13) {
        directSoulSubmit();
        $("directsoulnum").value = ""
    };
    return (key != 13);
}

function disablepersenter(e) {
    var key;
    if (window.event) key = window.event.keyCode; //IE
    else key = e.which; //firefox
    if (key == 13) {
        directperssubmit();
        $("directpersnum").value = ""
    };
    return (key != 13);
}

function disableverbenter(e) {
    var key;
    if (window.event) key = window.event.keyCode; //IE
    else key = e.which; //firefox
    if (key == 13) {
        var update = verbalevalsubmit($("verbaleval").value);
		verbapprox(update[0],update[1],update[2]);
        $("verbaleval").value = ""
    };
    return (key != 13);
}

function xmlUpdate() {
    var xhttp = new XMLHttpRequest();
    try {
        xhttp.open('GET', 'Dwarves.xml', false);
        xhttp.send(null);
        xmlDoc = xhttp.responseXML;
    } catch (e) {
        microsoft = "yes";
        var xml = document.createElement("xml");
        xml.src = "Dwarves.xml";
        document.body.appendChild(xml);
        xmlDoc = xml.XMLDocument;
        document.body.removeChild(xml);
    }
    if (microsoft == "yes") {
        dwarfnum = xmlDoc.getElementsByTagName("Creatures")[0].childNodes.length;
    } else {
        dwarfnum = ((xmlDoc.getElementsByTagName("Creatures")[0].childNodes.length - 1) / 2);
    }
    dwarfnum = parseInt(dwarfnum);
	//currentDwarf is global
    for (currentDwarf=0; currentDwarf < dwarfnum; currentDwarf++) {
	
	
		var dwarf = Object.create(defaultDwarf);
		xmlDwarf = xmlDoc.getElementsByTagName("Creature")[currentDwarf];
	
        try {
            dwarf.name = xmlDwarf.getElementsByTagName("Nickname")[0].childNodes[0].nodeValue;
        } catch (e) {
            dwarf.name = xmlDwarf.getElementsByTagName("Name")[0].childNodes[0].nodeValue;
        }
		
		var sex = xmlDwarf.getElementsByTagName("Sex")[0].childNodes[0].nodeValue;
		dwarf.gender = sex;
		
		//update attributes
		var xmlAttributes = xmlDwarf.getElementsByTagName('Attributes')[0].childNodes;
		dwarf.attributes = {};
		
		for (var i = 0; i < xmlAttributes.length-1; i++) if (xmlAttributes[i].nodeType == 1) {
			var attrName = xmlAttributes[i].nodeName.replace(/([^A-Z]+)([A-Z])/g,'$1 $2').toLowerCase();
			var attrValue = parseInt(xmlAttributes[i].textContent);
			dwarf.attributes[attrName] = attrValue;
		}
		
		//update skills
		var numberRegex = /.*\[([^\]]+)\].*/;
		var xmlSkills = xmlDwarf.getElementsByTagName('Skill');
		dwarf.skills = {};
		
		for (var i = 0; i < xmlSkills.length-1; i++) if (xmlSkills[i].nodeType == 1) {
			var skillName = xmlSkills[i].getElementsByTagName('Name')[0].textContent.toLowerCase();
			var skillLevel = xmlSkills[i].getElementsByTagName('Level')[0].textContent;
			skillLevel = parseInt(numberRegex.exec(skillLevel)[1]);
			dwarf.skills[skillName] = skillLevel;
		}
		
		//update traits

		var xmlTraits = xmlDwarf.getElementsByTagName("Trait");
		dwarf.traitTexts = [];
		dwarf.traits = {};
		
		dwarves[currentDwarf] = dwarf;
		
		for (var i = 0; i < xmlTraits.length-1; i++) {
			var traitText = xmlTraits[i].childNodes[0].nodeValue;
			dwarves[currentDwarf].traitTexts.push(traitText);
			var update = verbalevalsubmit(traitText);
			verbapprox(update[0], update[1], update[2]);
		}
		
		
		//add select options
        var dList = $("dwarflist");
        var option = document.createElement("option");
        option.text = dwarves[currentDwarf].name;
        dList.options.add(option, dList.options.length);
        
		var dFrom = $("dwarfsfrom");
        var option = document.createElement("option");
        option.text = dwarves[currentDwarf].name;
        dFrom.options.add(option, dFrom.options.length);
    }
    $("dwarfsfrom")[0].selected = true;
	currentDwarf = 0;
}


function xmlprocess() {
	//reset everything to defaults
	var dwarf = Object.create(defaultDwarf);
	
    if ($("dwarflist").selectedIndex == 0) {
		attributeUpdate();
		traitUpdate();
        $("dwarfname").value = "Urist McAverage";
        $("printdwarf").innerHTML = $("dwarfname").value;
        return;
    };
	
    currentDwarf = $("dwarflist").selectedIndex - 1;
	dwarf = dwarves[currentDwarf];
	
	if (dwarf.genfer == "Male") {
		$("male").checked = true;
	} else {
		$("female").checked = true;
	}
	
    $("dwarfname").value = dwarf.name;
    printname();
	printgender();
	$("verbaleval").value = "";
	
}


function changelogupdate(message) {
	if (message.toLowerCase().search('error') != -1) {
		message = '<span class="error">' + message + '</span>';
	}
	changelog.unshift(message);
    changelog.length = 5;
    $("changelogoutput").innerHTML = changelog.join("<br>");
}

function printname() {
    $("printdwarf").innerHTML = $("dwarfname").value;
    $("printdwarf2").innerHTML = $("dwarfname").value;
}

function printgender() {
    if ($("male").checked == true) {
        gender = "Male"
    } else {
        gender = "Female"
    };
    if (gender == "Male") {
        $("printdwarfgender").innerHTML = "\u2642";
        $("printdwarfgender2").innerHTML = "\u2642";
    } else {
        $("printdwarfgender").innerHTML = "\u2640";
        $("printdwarfgender2").innerHTML = "\u2640";
    }
}

function attributeUpdate() {
	var attributes = (dwarves[currentDwarf] || defaultDwarf).attributes;
	for (var attr in attributes) {
		//console.log(attr);
		$(attr.replace(/[ _]/g,'-')).innerHTML = attributes[attr];
    }
}

function traitUpdate() {
	var traits = (dwarves[currentDwarf] || defaultDwarf).traits;
	for (var trait in traits) {
		$(trait.replace(/[ _]/g,'-')).innerHTML = traits[trait];
    }
}

function directAttributeSubmit(rawAttribute, rawValue) {
	dwarf = dwarves[currentDwarf];
    printname();
    printgender();
	
    var attributeName = rawAttribute.toLowerCase();
	var attributeValue = parseInt(rawValue);
	
    if (isNaN(attributeValue)) {
        attributeValue = $(attributeName.replace(/ /, '-')).innerHTML;
        
        changelogupdate("Error! " + rawValue + " must be a number!");
    } else if (attributeValue < 0 || attributeValue > 5000) {
        attributeValue = $(attributeName.replace(/ /, '-')).innerHTML;
        
        changelogupdate("Error! " + rawValue + " must be between 0 and 5000!");
    } else {
        $(attributeName.replace(/ /, '-')).innerHTML = attributeValue;
        
        guide();
        changelogupdate(rawAttribute + " set to " + attributeValue + " by User.");
    }
	
    dwarf.attributes[attributeName] = attributeValue;
}

function directSoulSubmit() {	
    var rawAttribute = $("directsoul").value;
	var rawValue = $("directsoulnum").value;
	
	directAttributeSubmit(rawAttribute, rawValue);
}
function directBodySubmit() {	
    var rawAttribute = $("directbody").value;
	var rawValue = $("directbodynum").value;
	
	directAttributeSubmit(rawAttribute, rawValue);
}

function directTraitSubmit() {
    var rawTrait = $("directpers").value;
	var rawValue = $("directpersnum").value;
	
	dwarf = dwarves[currentDwarf];
    printname();
    printgender();
	
	var traitName = rawTrait.toLowerCase();
	var safeTraitName = traitName.replace(/ /, '-').replace(/ \(.*\)/, '');
	var traitValue = parseInt(rawValue);
	console.log(traitName, safeTraitName)
	
    if (isNaN(traitValue)) {
        traitValue = $(safeTraitName).innerHTML;
        
        changelogupdate("Error! " + rawValue + " must be a number!");
    } else if (traitValue < 0 || traitValue > 100) {
        traitValue = $(safeTraitName).innerHTML;
        
        changelogupdate("Error! " + rawValue + " must be between 0 and 100!");
    } else {
        $(safeTraitName).innerHTML = traitValue;
        
        guide();
        changelogupdate(rawTrait + " set to " + traitValue + " by User.");
    }
	
    dwarf.traits[traitName] = traitValue;
}

function bestdwarf() {
    var pick = $("joblist").selectedIndex;
    var pickName = $("joblist").value.toLowerCase();
    var dwarfallattrs = [];
    var dwarfbodyattrs = [];
    var dwarfsoulattrs = [];
    var attrsum = [];
    var skillcomp = [];
    var ratelist = [];
    var ratejob = $("joblist").options[pick].text;
    var fortsum = 0;
    var fortavg = 0;
    var dwarfworth = 0;
	var dwarf;

    var strbest = function() {
        return plusattrtopct(dwarf.attributes['strength']);
    }

    var agibest = function() {
        return minusattrtopct(dwarf.attributes['agility']);
    }

    var tuffbest = function() {
        return plusattrtopct(dwarf.attributes['toughness']);
    }

    var endrbest = function() {
        return avgattrtopct(dwarf.attributes['endurance']);
    }

    var disresbest = function() {
        return avgattrtopct(dwarf.attributes['disease resistance']);
    }

    var recupbest = function() {
        return avgattrtopct(dwarf.attributes['recuperation']);
    }

    var anabbest = function() {
        return plusattrtopct(dwarf.attributes['analytical ability']);
    }

    var membest = function() {
        return plusattrtopct(dwarf.attributes['memory']);
    }

    var crebest = function() {
        return plusattrtopct(dwarf.attributes['creatvity']);
    }

    var intubest = function() {
        return avgattrtopct(dwarf.attributes['intuition']);
    }

    var focbest = function() {
        return dubplusattrtopct(dwarf.attributes['focus']);
    }

    var willbest = function() {
        return avgattrtopct(dwarf.attributes['willpower']);
    }

    var patbest = function() {
        return plusattrtopct(dwarf.attributes['patience']);
    }

    var spabest = function() {
        return dubplusattrtopct(dwarf.attributes['spatial sense']);
    }

    var kinbest = function() {
        return avgattrtopct(dwarf.attributes['kinaesthetic sense']);
    }

    var lingbest = function() {
        return avgattrtopct(dwarf.attributes['linguistic ability']);
    }

    var musbest = function() {
        return avgattrtopct(dwarf.attributes['musicality']);
    }

    var empbest = function() {
        return avgattrtopct(dwarf.attributes['empathy']);
    }

    var socbest = function() {
        return avgattrtopct(dwarf.attributes['social awareness']);
    }
	
	var fitness = function() {
		console.log("no fitness function found")
	}
    
	// LEADER/MANAGER (not low straightforwardness, not low cooperation, organizer, socializer)
	if (pick == 1) {
            fitness = function(i){
				var traitsperdwarf = [];
				var dwarftraitlist = [];
				traitsperdwarf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
				if (microsoft != "yes") {
					traitsperdwarf[i] = (traitsperdwarf[i] - 1) / 2;
				};
				x = 0;
				for (x = 0; x < traitsperdwarf[i]; x++) {
					dwarftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x].childNodes[0].nodeValue;
					dwarftraitlist[x] = dwarftraitlist[x].toLowerCase();
				}
				dwarftraitlist = dwarftraitlist.toString();
				if (dwarftraitlist.search("to compromise with somebody else") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else if (dwarftraitlist.search("rather intimidate others") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else if (dwarftraitlist.search("like to compromise") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else if (dwarftraitlist.search("some deception is necessary") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else if (dwarftraitlist.search("not straightforward") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else if (dwarftraitlist.search("guarded in relationships") != -1) {
					skillcomp[i] = "deek";
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				} else {
					skillcomp[i] = anabbest() + crebest() + socbest() + lingbest() + empbest() + socbest();
					skillcomp[i] = Math.round(skillcomp[i] / 6);
					ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
				}
			}
	}
    // BROKER (joi, appraiser, socializer)
    else if (pick == 2) {
        fitness = function(i){
            skillcomp[i] = intubest() + empbest() + socbest() + anabbest() + membest() + intubest() + lingbest() + empbest() + socbest();
            skillcomp[i] = Math.round(skillcomp[i] / 9);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // CLOSE COMBAT DWARF SATWSsKs
    else if (pick == 3) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + tuffbest() + willbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // RANGED COMBAT DWARF SURGEON SUTURER AFSsKs
    else if (pick == 4 || pick == 18 || pick == 19) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + focbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // SOCIALIZER LEmSa
    else if (pick == 5) {
    
        fitness = function(i){
            skillcomp[i] = lingbest() + empbest() + socbest();
            skillcomp[i] = Math.round(skillcomp[i] / 3);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // MINER BITER STEWSsKs
    else if (pick == 6 || pick == 64) {
        fitness = function(i){
            skillcomp[i] = strbest() + tuffbest() + endrbest() + willbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName]);
        }
    }
    // BOWYER ENGRAVER GEM SETTER BONE CARVER CLOTHIER STONE CRAFTER WEAVER WOOD CRAFTER ACSsKs
    else if (pick == 7 || pick == 10 || pick == 45 || pick == 46 || pick == 47 || pick == 50 || pick == 51 || pick == 52) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + crebest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // CARPENTER SACSsKs
    else if (pick == 8) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + crebest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // WOOD CUTTER SWIMMER WRESTLER SAEWSsKs
    else if (pick == 9 || pick == 58 || pick == 66) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + willbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // MASON ARMORSMITH METAL CRAFTER METALSMITH WEAPONSMITH GLASSMAKER LEATHERWORKER SAECSsKs
    else if (pick == 11 || pick == 39 || pick == 41 || pick == 42 || pick == 43 || pick == 48 || pick == 49) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + willbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // ANIMAL DISSECTOR TANNER FISH DISSECTOR AKs
    else if (pick == 12 || pick == 33 || pick == 37) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 2);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // ANIMAL TRAINER ATEIPEm
    else if (pick == 13) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + tuffbest() + endrbest() + intubest() + patbest() + empbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // TRAPPER AAaCSs
    else if (pick == 14) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + anabbest() + crebest() + spabest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // BONE DOCTOR SAFSsKs
    else if (pick == 15) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + focbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // CRUTCH WALKER AEWSsKs
    else if (pick == 16) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + endrbest() + willbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // DIAGNOSTICIAN APPRAISER AaMI
    else if (pick == 17 || pick == 59) {
    
        fitness = function(i){
            skillcomp[i] = anabbest() + membest() + intubest();
            skillcomp[i] = Math.round(skillcomp[i] / 3);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // WOUND DRESSER ASsKsEm
    else if (pick == 20) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + spabest() + kinbest() + empbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // BREWER SAKs
    else if (pick == 21) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 3);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // BUTCHER DYER GROWER MILKER MILLER THRESHER SAEKs
    else if (pick == 22 || pick == 25 || pick == 26 || pick == 29 || pick == 30 || pick == 34) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // CHEESE MAKER SAEAaCKs
    else if (pick == 23) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + crebest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // COOK AAaCKs
    else if (pick == 24) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + anabbest() + crebest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // HERBALIST AMKs
    else if (pick == 27) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + membest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 3);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // LYE MAKER POTASH MAKER SOAPER WOOD BURNER STEKs
    else if (pick == 28 || pick == 31 || pick == 32 || pick == 35) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + tuffbest() + endrbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // FISH CLEANER AEKs
    else if (pick == 36) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + endrbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 3);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // FISHERDWARF SAFPKs
    else if (pick == 38) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + focbest() + patbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // FURNACE OPERATOR STEAaKs
    else if (pick == 40) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + tuffbest() + endrbest() + anabbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // GEM CUTTER AAaSsKs
    else if (pick == 44) {
    
        fitness = function(i){
            skillcomp[i] = agibest() + anabbest() + spabest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 4);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // STRAND EXTRACTOR SAEAaKs
    else if (pick == 53) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // MECHANIC SIEGE ENGINEER SAEAaCSs
    else if (pick == 54 || pick == 56) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + crebest() + spabest();
            skillcomp[i] = Math.round(skillcomp[i] / 6);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // PUMP OPERATOR ARMOR USER STEWKs
    else if (pick == 55 || pick == 63) {
    
        fitness = function(i){
            skillcomp[i] = strbest() + tuffbest() + endrbest() + willbest() + kinbest();
            skillcomp[i] = Math.round(skillcomp[i] / 5);
            ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // SIEGE OPERATOR STEAaFSs
    else if (pick == 57) {
    
		fitness = function(i){
		
			skillcomp[i] = strbest() + tuffbest() + endrbest() + anabbest() + focbest() + spabest();
			skillcomp[i] = Math.round(skillcomp[i] / 6);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // BUILDING DESIGNER AaCSs
    else if (pick == 60) {
    
		fitness = function(i){
		
			skillcomp[i] = anabbest() + crebest() + spabest();
			skillcomp[i] = Math.round(skillcomp[i] / 3);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // ORGANIZER AaCSa
    else if (pick == 61) {
    
		fitness = function(i){
		
			skillcomp[i] = anabbest() + crebest() + socbest();
			skillcomp[i] = Math.round(skillcomp[i] / 3);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // RECORD KEEPER STUDENT AaMF
    else if (pick == 62 || pick == 72) {
    
		fitness = function(i){
		
			skillcomp[i] = anabbest() + membest() + focbest();
			skillcomp[i] = Math.round(skillcomp[i] / 3);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // DODGER ATEWSsKs
    else if (pick == 65) {
    
		fitness = function(i){
		
			skillcomp[i] = agibest() + tuffbest() + endrbest() + willbest() + spabest() + kinbest();
			skillcomp[i] = Math.round(skillcomp[i] / 6);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // COMEDIAN (not high self-consciousness, ACKsL)

    else if (pick == 67) {
		fitness = function(i){
			var traitsperdwarf = [];
			var dwarftraitlist = [];
			traitsperdwarf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
			if (microsoft == "yes") {} else {
				traitsperdwarf[i] = (traitsperdwarf[i] - 1) / 2;
			};
			x = 0;
			for (x = 0; x < traitsperdwarf[i]; x++) {
				dwarftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x].childNodes[0].nodeValue;
				dwarftraitlist[x] = dwarftraitlist[x].toLowerCase();
			}
			dwarftraitlist = dwarftraitlist.toString();
			if (dwarftraitlist.search("socially cripplied") != -1) {
				skillcomp[i] = "deek";
				ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
			} else if (dwarftraitlist.search("rejection and ridicule") != -1) {
				skillcomp[i] = "deek";
				ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
			} else {
				skillcomp[i] = agibest() + crebest() + kinbest() + lingbest();
				skillcomp[i] = Math.round(skillcomp[i] / 4);
				ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
			}
		}
    }
    // INTIMIDATOR (not high cooperation, AKsL)

    else if (pick == 68) {
            fitness = function(i){
				var traitsperdwarf = [];
				var dwarftraitlist = [];
				traitsperdwarf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
				if (microsoft == "yes") {} else {
					traitsperdwarf[i] = (traitsperdwarf[i] - 1) / 2;
				};
                x = 0;
                for (x = 0; x < traitsperdwarf[i]; x++) {
                    dwarftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x].childNodes[0].nodeValue;
                    dwarftraitlist[x] = dwarftraitlist[x].toLowerCase();
                }
                dwarftraitlist = dwarftraitlist.toString();
                if (dwarftraitlist.search("needs to get along with others") != -1) {
                    skillcomp[i] = "deek";
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                } else if (dwarftraitlist.search("dislikes confrontations") != -1) {
                    skillcomp[i] = "deek";
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                } else if (dwarftraitlist.search("willing to compromise") != -1) {
                    skillcomp[i] = "deek";
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                } else {
                    skillcomp[i] = agibest() + kinbest() + lingbest();
                    skillcomp[i] = Math.round(skillcomp[i] / 3);
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                }
            }
    }
    // JUDGE OF INTENT IEmSa
    else if (pick == 69) {
    
		fitness = function(i){
		
			skillcomp[i] = intubest() + empbest() + socbest();
			skillcomp[i] = Math.round(skillcomp[i] / 3);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
    // LIAR (low straightforwardness, CLSa)

    else if (pick == 70) {
            fitness = function(i){
				var traitsperdwarf = [];
				var dwarftraitlist = [];
				traitsperdwarf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
				if (microsoft == "yes") {} else {
					traitsperdwarf[i] = (traitsperdwarf[i] - 1) / 2;
				};
                x = 0;
                for (x = 0; x < traitsperdwarf[i]; x++) {
                    dwarftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x].childNodes[0].nodeValue;
                    dwarftraitlist[x] = dwarftraitlist[x].toLowerCase();
                }
                dwarftraitlist = dwarftraitlist.toString();
                if (dwarftraitlist.search("some deception is necessary") >= 1) {
                    isliar();
                } else if (dwarftraitlist.search("not straightforward") >= 1) {
                    isliar();
                } else if (dwarftraitlist.search("guarded in relationships") >= 1) {
                    isliar();
                } else {
                    skillcomp[i] = "deek";
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                }

                function isliar() {
                    skillcomp[i] = crebest() + lingbest() + socbest();
                    skillcomp[i] = Math.round(skillcomp[i] / 3);
                    ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
                }
            }
    }
    // OBSERVER IFSs
    else if (pick == 71) {
    
		fitness = function(i){
		
			skillcomp[i] = intubest() + focbest() + spabest();
			skillcomp[i] = Math.round(skillcomp[i] / 3);
			ratelist[i] = namerate(dwarves[i], skillcomp[i], jobSkills[pickName])
        }
    }
	
	if (pick == 0) {
        $("printdwarf2").innerHTML = "\u263C " + "Your Embark";
        $("printdwarfgender2").innerHTML = "\u263C";
		
		var dwarvesAttributeSum = 0;
        for (var i in dwarves) {
            dwarf = dwarves[i];
			dwarves[i].attributeSum = 0;
            for (var a in dwarves[i].attributes) {
                dwarves[i].attributeSum = dwarves[i].attributeSum + dwarves[i].attributes[a];
            }
            dwarvesAttributeSum += dwarves[i].attributeSum;
        }
    
        dwarvesAttributeAvg = Math.round(dwarvesAttributeSum / dwarves.length);
        dwarvesAttributeAvg = Math.round(((dwarvesAttributeAvg * 89) / 1976) - (916735 / 988));
        dwarfworth = Math.round((dwarvesAttributeSum * 100) / 21835) / 100;
        $("guidance").innerHTML = "Your " + dwarves.length + " dwarves have the attribute points of " 
						+ dwarfworth + " average dwarves. If this is your starting seven, about " 
						+ dwarvesAttributeAvg + " percent of embarks will have as many or fewer attribute points as this embark.";
        return;
    }
	else {
        for (var i in dwarves) {
            dwarf = dwarves[i];
            if ($("dwarfsfrom")[0].selected == true || $("dwarfsfrom")[i + 1].selected == true) {
                fitness(i);
            }
        }
	}
	
	
	
	
    if (superbname.length >= 1) {
        superbname.unshift("<div class=\"guidances\"><p>You are lucky to have a superb " + ratejob + " in:</p> <ul>");
        superbname.push("</ul></div>");
    };
    if (verygoodname.length >= 1) {
        verygoodname.unshift("<div class=\"guidances\"><p>You'll have a very good " + ratejob + " in:</p> <ul>");
        verygoodname.push("</ul></div>");
    };
    if (goodname.length >= 1) {
        goodname.unshift("<div class=\"guidances\"><p>If you want a good " + ratejob + "; there's:</p> <ul>");
        goodname.push("</ul></div>");
    };
    if (highavgname.length >= 1) {
        highavgname.unshift("<div class=\"guidances\"><p> For a " + ratejob + " a bit above average; try:</p> <ul>");
        highavgname.push("</ul></div>");
    };
    if (lowavgname.length >= 1) {
        lowavgname.unshift("<div class=\"guidances\"><p>If you'll settle for a below average " + ratejob + "; there's:</p> <ul>");
        lowavgname.push("</ul></div>");
    };
    if (poorname.length >= 1) {
        poorname.unshift("<div class=\"guidances\"><p>You will have a poor " + ratejob + " in:</p> <ul>");
        poorname.push("</ul></div>");
    };
    if (verypoorname.length >= 1) {
        verypoorname.unshift("<div class=\"guidances\"><p>You'll have a very poor " + ratejob + " in:</p> <ul>");
        verypoorname.push("</ul></div>");
    };
    if (horriblename.length >= 1) {
        horriblename.unshift("<div class=\"guidances\"><p>You're unlucky to have a horrible " + ratejob + " in:</p> <ul>");
        horriblename.push("</ul></div>");
    };
    if (deekname.length >= 1) {
        deekname.unshift("<div class=\"guidances\"><p>The following dwarves cannot be a " + ratejob + " because of personality problems:</p> <ul>");
        deekname.push("</ul></div>");
    };
	
	
    $("printdwarf2").innerHTML = "\u263C " + "Best " + $("joblist").options[pick].text;
    $("printdwarfgender2").innerHTML = "\u263C";
    var guidename = superbname.toString() + " " + verygoodname.toString() + " " + goodname.toString() + " " + highavgname.toString() + " " + lowavgname.toString() + " " + poorname.toString() + " " + verypoorname.toString() + " " + horriblename.toString() + " " + deekname.toString();
    guidename = guidename.replace(/,/g, " ");
    guidename = guidename.replace(/\u003B/g, ",");
    $("guidance").innerHTML = guidename;
    superbname = [];
    verygoodname = [];
    goodname = [];
    highavgname = [];
    lowavgname = [];
    poorname = [];
    verypoorname = [];
    horriblename = [];
    deekname = [];
}

function namerate(dwarf, pct, jobSkills) {
	
	var relatedSkills = '';
	var skillLevel;
	for (var s in jobSkills){
		skillLevel = dwarf.skills[jobSkills[s]];
		if (skillLevel > 0){
			//TODO: multiple skills and format
			relatedSkills += ' (L' + skillLevel + ') ';
		}
	}
	
	var rate;
    if (pct == "deek") {
        rate = 'horrible';
    } else if (pct > 90) {
        rate = 'superb';
    } else if (pct > 75) {
        rate = 'verygood';
    } else if (pct > 60) {
        rate = 'good';
    } else if (pct > 49) {
        rate = 'highavg';
    } else if (pct > 39) {
        rate = 'lowavg';
    } else if (pct > 24) {
        rate = 'poor';
    } else if (pct > 9) {
        rate = 'verygood';
    } else {
        rate = 'horrible';
    }
	
	var newname = '<li class="' + rate + '" onclick="goToName(\'' + dwarf.name + '\')">' + dwarf.name + relatedSkills + '</li>';
	window[rate + 'name'].unshift(newname);
	
}


/* job appends a string to the appropriate array */
function jobrate(newjob, pct, skillname) {
	var currentLevel = dwarves[currentDwarf].skills[skillname.toLowerCase()];
	
	var rate;
    if (pct == "deek") {
        rate = 'horrible';
    } else if (pct > 90) {
        rate = 'superb';
    } else if (pct > 75) {
        rate = 'verygood';
    } else if (pct > 60) {
        rate = 'good';
    } else if (pct > 49) {
        rate = 'highavg';
    } else if (pct > 39) {
        rate = 'lowavg';
    } else if (pct > 24) {
        rate = 'poor';
    } else if (pct > 9) {
        rate = 'verygood';
    } else {
        rate = 'horrible';
    }

	var newname = '<li class="' + rate + ' onclick="goToJob(\'' + newjob + '\')">' + newjob + (currentLevel != undefined ? ' (L' + currentLevel + ')' : '') + '</li>';
	window[rate + 'name'].unshift(newname);
}

function goToName(name){
	$('dwarflist').value = name;
	viewDwarf();
}

function goToJob(job){
	$('joblist').value = job;
	bestdwarf();
}

function viewDwarf(){
	xmlprocess();
    guide();
}

/* when given a text trait 
 * returns the attribute or trait that it relates to and the corosponding value
 * TODO: Use map instead of ifs
 */
function verbalevalsubmit(verbal) {
    verbal = verbal.toLowerCase();
	
	// Type = Soul, Body or Trait
	var type, trait, value;

    // STRENGTH
    if (verbal.search("unbelievably strong") != -1) {
        value = 2250;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("mighty") != -1) {
        value = 2125;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("very strong") != -1) {
        value = 1875;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("strong") != -1 && verbal.search("urges") == -1 && verbal.search("duty") == -1) {
        value = 1625;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("average strength") != -1) {
        value = 1250;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("unfathomably weak") != -1) {
        value = 125;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("unquestionably weak") != -1) {
        value = 375;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("very weak") != -1) {
        value = 625;
        trait = "Strength";
		type = "Body";
    } else if (verbal.search("weak") != -1) {
        value = 875;
        trait = "Strength";
		type = "Body";
    }
    // AGILITY
    else if (verbal.search("amazingly agile") != -1) {
        value = 1900;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("extremely agile") != -1) {
        value = 1775;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("very agile") != -1) {
        value = 1525;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("agile") != -1 && verbal.search("fragile") == -1) {
        value = 1275;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("average agility") != -1) {
        value = 900;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("abysmally clumsy") != -1) {
        
        changelogupdate("No dwarf is abysmally clumsy!");
        return;
    } else if (verbal.search("totally clumsy") != -1) {
        value = 75;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("quite clumsy") != -1) {
        value = 275;
        trait = "Agility";
		type = "Body";
    } else if (verbal.search("clumsy") != -1 && verbal.search("very clumsy") == -1) {
        value = 525;
        trait = "Agility";
		type = "Body";
    }
    // TOUGHNESS
    else if (verbal.search("basically unbreakable") != -1) {
        value = 2250;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("incredibly tough") != -1) {
        value = 2125;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("quite durable") != -1) {
        value = 1875;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("average toughness") != -1) {
        value = 1250;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("tough") != -1) {
        value = 1625;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("shockingly fragile") != -1) {
        value = 125;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("remarkably flimsy") != -1) {
        value = 375;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("very flimsy") != -1) {
        value = 625;
        trait = "Toughness";
		type = "Body";
    } else if (verbal.search("flimsy") != -1) {
        value = 875;
        trait = "Toughness";
		type = "Body";
    }
    // ENDURANCE
    else if (verbal.search("absolutely inexhaustible") != -1) {
        value = 2000;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("indefatigable") != -1) {
        value = 1875;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("very slow to tire") != -1) {
        value = 1625;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("slow to tire") != -1) {
        value = 1375;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("average endurance") != -1) {
        value = 1000;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("truly quick to tire") != -1) {
        value = 0;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("extremely quick to tire") != -1) {
        value = 125;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("very quick to tire") != -1) {
        value = 375;
        trait = "Endurance";
		type = "Body";
    } else if (verbal.search("quick to tire") != -1) {
        value = 625;
        trait = "Endurance";
		type = "Body";
    }
    // DISEASE RESISTANCE
    else if (verbal.search("virtually never sick") != -1) {
        value = 2000;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("almost never sick") != -1) {
        value = 1875;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("very rarely sick") != -1) {
        value = 1625;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("rarely sick") != -1) {
        value = 1375;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("average disease resistance") != -1) {
        value = 1000;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("stunningly susceptible to disease") != -1) {
        value = 0;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("really susceptible to disease") != -1) {
        value = 125;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("quite susceptible to disease") != -1) {
        value = 375;
        trait = "Disease-Resistance";
		type = "Body";
    } else if (verbal.search("susceptible to disease") != -1) {
        value = 625;
        trait = "Disease-Resistance";
		type = "Body";
    }
    // RECUPERATION
    else if (verbal.search("possessed of amazing recuperative powers") != -1) {
        value = 2000;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("incredibly quick to heal") != -1) {
        value = 1875;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("quite quick to heal") != -1) {
        value = 1625;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("quick to heal") != -1) {
        value = 1375;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("average recuperation") != -1) {
        value = 1000;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("shockingly slow to heal") != -1) {
        value = 0;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("really slow to heal") != -1) {
        value = 125;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("very slow to heal") != -1) {
        value = 375;
        trait = "Recuperation";
		type = "Body";
    } else if (verbal.search("slow to heal") != -1) {
        value = 625;
        trait = "Recuperation";
		type = "Body";
    }
    // ANALYTICAL ABILITY
    else if (verbal.search("awesome intellectual powers") != -1) {
        value = 2250;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("great analytical abilities") != -1) {
        value = 2125;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("sharp intellect") != -1) {
        value = 1875;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("good intellect") != -1) {
        value = 1625;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("average analytical ability") != -1) {
        value = 1250;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("stunning lack of analytical ability") != -1) {
        value = 125;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("lousy intellect") != -1) {
        value = 375;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("very bad analytical abilities") != -1) {
        value = 625;
        trait = "Analytical-Ability";
		type = "Soul";
    } else if (verbal.search("poor analytical abilities") != -1) {
        value = 875;
        trait = "Analytical-Ability";
		type = "Soul";
    }
    // MEMORY
    else if (verbal.search("astonishing memory") != -1) {
        value = 2250;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("amazing memory") != -1) {
        value = 2125;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("great memory") != -1) {
        value = 1875;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("good memory") != -1) {
        value = 1625;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("average memory") != -1) {
        value = 1250;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("little memory to speak of") != -1) {
        value = 125;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("really bad memory") != -1) {
        value = 375;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("poor memory") != -1) {
        value = 625;
        trait = "Memory";
		type = "Soul";
    } else if (verbal.search("iffy memory") != -1) {
        value = 875;
        trait = "Memory";
		type = "Soul";
    }
    // CREATIVITY
    else if (verbal.search("boundless creative imagination") != -1) {
        value = 2250;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("great creativity") != -1) {
        value = 2125;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("very good creativity") != -1) {
        value = 1875;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("good creativity") != -1) {
        value = 1625;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("average creativity") != -1) {
        value = 1250;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("next to no creative talent") != -1) {
        value = 125;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("lousy creativity") != -1) {
        value = 375;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("poor creativity") != -1) {
        value = 625;
        trait = "Creatvity";
		type = "Soul";
    } else if (verbal.search("meager creativity") != -1) {
        value = 875;
        trait = "Creatvity";
		type = "Soul";
    }
    // INTUITION
    else if (verbal.search("uncanny intuition") != -1) {
        value = 2000;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("great intuition") != -1) {
        value = 1875;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("very good intuition") != -1) {
        value = 1625;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("good intuition") != -1) {
        value = 1375;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("average intuition") != -1) {
        value = 1000;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("horrible intuition") != -1) {
        value = 0;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("lousy intuition") != -1) {
        value = 125;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("very bad intuition") != -1) {
        value = 375;
        trait = "Intuition";
		type = "Soul";
    } else if (verbal.search("bad intuition") != -1) {
        value = 625;
        trait = "Intuition";
		type = "Soul";
    }
    // FOCUS
    else if (verbal.search("unbreakable focus") != -1) {
        value = 2542;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("great ability to focus") != -1) {
        value = 2417;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("very good focus") != -1) {
        value = 2167;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("ability to focus") != -1) {
        value = 1917;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("average focus") != -1) {
        value = 1500;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("absolute inability to focus") != -1) {
        value = 271;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("really poor focus") != -1) {
        value = 668;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("quite poor focus") != -1) {
        value = 918;
        trait = "Focus";
		type = "Soul";
    } else if (verbal.search("poor focus") != -1) {
        value = 1168;
        trait = "Focus";
		type = "Soul";
    }
    // WILLPOWER
    else if (verbal.search("unbreakable will") != -1) {
        value = 2000;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("iron will") != -1) {
        value = 1875;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("lot of willpower") != -1) {
        value = 1625;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("average willpower") != -1) {
        value = 1000;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("absolutely no willpower") != -1) {
        value = 0;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("next to no willpower") != -1) {
        value = 125;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("large deficit of willpower") != -1) {
        value = 375;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("little willpower") != -1) {
        value = 625;
        trait = "Willpower";
		type = "Soul";
    } else if (verbal.search("willpower") != -1 && verbal.search("great") == -1) {
        value = 1375;
        trait = "Willpower";
		type = "Soul";
    }
    // PATIENCE
    else if (verbal.search("absolutely boundless patience") != -1) {
        value = 2250;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("deep well of patience") != -1) {
        value = 2125;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("great deal of patience") != -1) {
        value = 1875;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("sum of patience") != -1) {
        value = 1625;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("average patience") != -1) {
        value = 1250;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("no patience at all") != -1) {
        value = 125;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("very little patience") != -1) {
        value = 375;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("little patience") != -1) {
        value = 625;
        trait = "Patience";
		type = "Soul";
    } else if (verbal.search("shortage of patience") != -1) {
        value = 875;
        trait = "Patience";
		type = "Soul";
    }
    // SPATIAL SENSE
    else if (verbal.search("stunning feel for spatial relationships") != -1) {
        value = 2542;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("amazing spatial sense") != -1) {
        value = 2417;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("great feel for the surrounding space") != -1) {
        value = 2167;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("good spatial sense") != -1) {
        value = 1917;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("average spatial sense") != -1) {
        value = 1500;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("no sense for spatial relationships") != -1) {
        value = 271;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("atrocious spatial sense") != -1) {
        value = 668;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("poor spatial senses") != -1) {
        value = 918;
        trait = "Spatial-Sense";
		type = "Soul";
    } else if (verbal.search("questionable spatial sense") != -1) {
        value = 1168;
        trait = "Spatial-Sense";
		type = "Soul";
    }
    // kinaesthetic SENSE
    else if (verbal.search("astounding feel for the position") != -1) {
        value = 2000;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("great kinaesthetic sense") != -1) {
        value = 1875;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("very good sense of the position") != -1) {
        value = 1625;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("good kinaesthetic sense") != -1) {
        value = 1375;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("average kinaesthetic sense") != -1) {
        value = 1000;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("unbelievably atrocious sense of the position") != -1) {
        value = 0;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("very clumsy kinaesthetic sense") != -1) {
        value = 125;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("poor kinaesthetic sense") != -1) {
        value = 375;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    } else if (verbal.search("meager kinaesthetic sense") != -1) {
        value = 625;
        trait = "kinaesthetic-Sense";
		type = "Soul";
    }
    // LINGUISTIC ABILITY
    else if (verbal.search("astonishing ability with languages") != -1) {
        value = 2000;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("great affinity for language") != -1) {
        value = 1875;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("natural inclination toward language") != -1) {
        value = 1625;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("way with words") != -1) {
        value = 1375;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("average linguistic ability") != -1) {
        value = 1000;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("difficulty with words and language") != -1) {
        value = 0;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("very little linguistic ability") != -1) {
        value = 125;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("little linguistic ability") != -1) {
        value = 375;
        trait = "Linguistic-Ability";
		type = "Soul";
    } else if (verbal.search("little difficulty with words") != -1) {
        value = 625;
        trait = "Linguistic-Ability";
		type = "Soul";
    }
    // MUSICALITY
    else if (verbal.search("astonishing knack for music") != -1) {
        value = 2000;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("great musical sense") != -1) {
        value = 1875;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("natural ability with music") != -1) {
        value = 1625;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("feel for music") != -1 && verbal.search("absolutely no") == -1) {
        value = 1375;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("average musicality") != -1) {
        value = 1000;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("absolutely no feel for music") != -1) {
        value = 0;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("next to no natural musical ability") != -1) {
        value = 125;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("little natural inclination toward music") != -1) {
        value = 375;
        trait = "Musicality";
		type = "Soul";
    } else if (verbal.search("iffy sense for music") != -1) {
        value = 675;
        trait = "Musicality";
		type = "Soul";
    }
    // EMPATHY
    else if (verbal.search("remarkable sense of others' emotions") != -1) {
        value = 2000;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("great sense of empathy") != -1) {
        value = 1875;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("very good sense of empathy") != -1) {
        value = 1625;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("ability to read emotions") != -1) {
        value = 1375;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("average empathy") != -1) {
        value = 1000;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("utter inability to judge others' emotions") != -1) {
        value = 0;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("next to no empathy") != -1) {
        value = 125;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("very bad sense of empathy") != -1) {
        value = 375;
        trait = "Empathy";
		type = "Soul";
    } else if (verbal.search("poor empathy") != -1) {
        value = 625;
        trait = "Empathy";
		type = "Soul";
    }
    // SOCIAL AWARENESS
    else if (verbal.search("profound feel for social relationships") != -1) {
        value = 2000;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("great feel for social relationships") != -1) {
        value = 1875;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("very good feel for social relationships") != -1) {
        value = 1625;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("good feel for social relationships") != -1) {
        value = 1375;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("average social awareness") != -1) {
        value = 1000;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("inability to understand social relationships") != -1) {
        value = 0;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("lack of understanding of social relationships") != -1) {
        value = 125;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("poor ability to manage or understand") != -1) {
        value = 375;
        trait = "Social-Awareness";
		type = "Soul";
    } else if (verbal.search("meager ability with social relationships") != -1) {
        value = 625;
        trait = "Social-Awareness";
		type = "Soul";
    }
    // ACHIEVEMENT STRIVING
    else if (verbal.search("strives for perfection") != -1) {
        value = 95;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("important to strive for excellence") != -1) {
        value = 83;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("strives for excellence") != -1) {
        value = 68;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("average achievement striving") != -1) {
        value = 50;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("does the bare minimum") != -1) {
        value = 5;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("rarely does more work") != -1) {
        value = 17;
        trait = "Achievement_Striving";
		type = "Trait";
    } else if (verbal.search("more work than necessary") != -1) {
        value = 32;
        trait = "Achievement_Striving";
		type = "Trait";
    }
    // ACTIVITY LEVEL
    else if (verbal.search("constantly active and energetic") != -1) {
        value = 95;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("very energetic and active") != -1) {
        value = 83;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("very active") != -1) {
        value = 68;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("average activity level") != -1) {
        value = 50;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("be bothered with frantic") != -1) {
        value = 5;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("life at a leisurely") != -1) {
        value = 17;
        trait = "Activity_Level";
		type = "Trait";
    } else if (verbal.search("relaxed") != -1) {
        value = 32;
        trait = "Activity_Level";
		type = "Trait";
    }
    // ADVENTUROUSNESS
    else if (verbal.search("loves fresh experiences") != -1) {
        value = 95;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("eager for new experiences") != -1) {
        value = 83;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("likes to try new things") != -1) {
        value = 68;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("average adventurousness") != -1) {
        value = 50;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("resistant to change") != -1) {
        value = 5;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("uncomfortable with change") != -1) {
        value = 17;
        trait = "Adventurousness";
		type = "Trait";
    } else if (verbal.search("prefers familiar routines") != -1) {
        value = 32;
        trait = "Adventurousness";
		type = "Trait";
    }
    // ALTRUISM
    else if (verbal.search("truly fulfilled by assisting") != -1) {
        value = 95;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("helping others very rewarding") != -1) {
        value = 83;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("helping others rewarding") != -1) {
        value = 68;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("average altruism") != -1) {
        value = 50;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("helping others as an imposition") != -1) {
        value = 5;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("dislikes helping others") != -1) {
        value = 17;
        trait = "Altruism";
		type = "Trait";
    } else if (verbal.search("way to help others") != -1) {
        value = 32;
        trait = "Altruism";
		type = "Trait";
    }
    // ANGER
    else if (verbal.search("state of internal rage") != -1) {
        value = 95;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("very quick to anger") != -1) {
        value = 83;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("quick to anger") != -1) {
        value = 68;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("average anger") != -1) {
        value = 50;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("never becomes angry") != -1) {
        value = 5;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("very slow to anger") != -1) {
        value = 17;
        trait = "Anger";
		type = "Trait";
    } else if (verbal.search("slow to anger") != -1) {
        value = 32;
        trait = "Anger";
		type = "Trait";
    }
    // ANXIETY
    else if (verbal.search("nervous wreck") != -1) {
        value = 95;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("tense and jittery") != -1) {
        value = 83;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("often nervous") != -1) {
        value = 68;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("average anxiety") != -1) {
        value = 50;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("incredibly calm") != -1) {
        value = 5;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("very calm") != -1) {
        value = 17;
        trait = "Anxiety";
		type = "Trait";
    } else if (verbal.search("calm") != -1) {
        value = 32;
        trait = "Anxiety";
		type = "Trait";
    }
    // ARTISTIC INTEREST
    else if (verbal.search("easily become absorbed") != -1) {
        value = 95;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("greatly appreciates art") != -1) {
        value = 83;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("appreciates art") != -1) {
        value = 68;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("average artistic interest") != -1) {
        value = 50;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("completely uninterested in art") != -1) {
        value = 5;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("not interested in art") != -1) {
        value = 17;
        trait = "Artistic_Interest";
		type = "Trait";
    } else if (verbal.search("not have a great aesthetic") != -1) {
        value = 32;
        trait = "Artistic_Interest";
		type = "Trait";
    }
    // ASSERTIVENESS
    else if (verbal.search("loves to take charge") != -1) {
        value = 95;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("very assertive") != -1) {
        value = 83;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("average assertiveness") != -1) {
        value = 50;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("never speaks out") != -1) {
        value = 5;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("others handle the leadership") != -1) {
        value = 17;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("unassertive") != -1) {
        value = 32;
        trait = "Assertiveness";
		type = "Trait";
    } else if (verbal.search("assertive") != -1 && verbal.search("average") == -1) {
        value = 68;
        trait = "Assertiveness";
		type = "Trait";
    }
    // CAUTIOUSNESS
    else if (verbal.search("thinks through every alternative") != -1) {
        value = 95;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("extremely cautious") != -1) {
        value = 83;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("takes time when making decisions") != -1) {
        value = 68;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("average cautiousness") != -1) {
        value = 50;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("thinking through possibilities") != -1) {
        value = 5;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("acts impulsively") != -1) {
        value = 17;
        trait = "Cautiousness";
		type = "Trait";
    } else if (verbal.search("first thing that comes to mind") != -1) {
        value = 32;
        trait = "Cautiousness";
		type = "Trait";
    }
    // CHEERFULNESS
    else if (verbal.search("feels filled with joy") != -1) {
        value = 95;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("very happy and optimistic") != -1) {
        value = 83;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("often cheerful") != -1) {
        value = 68;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("average cheerfulness") != -1) {
        value = 50;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("never optimistic") != -1) {
        value = 5;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("pessimist") != -1) {
        value = 17;
        trait = "Cheerfulness";
		type = "Trait";
    } else if (verbal.search("rarely happy or enthusiastic") != -1) {
        value = 32;
        trait = "Cheerfulness";
		type = "Trait";
    }
    // COOPERATION
    else if (verbal.search("needs to get along with others") != -1) {
        value = 95;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("dislikes confrontations") != -1) {
        value = 83;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("willing to compromise") != -1) {
        value = 68;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("average cooperation") != -1) {
        value = 50;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("to compromise with somebody else") != -1) {
        value = 5;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("rather intimidate others") != -1) {
        value = 17;
        trait = "Cooperation";
		type = "Trait";
    } else if (verbal.search("like to compromise") != -1) {
        value = 32;
        trait = "Cooperation";
		type = "Trait";
    }
    // DEPRESSION
    else if (verbal.search("frequently depressed") != -1) {
        value = 95;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("often sad and dejected") != -1) {
        value = 83;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("often feels discouraged") != -1) {
        value = 68;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("average depression") != -1) {
        value = 50;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("never feels discouraged") != -1 && verbal.search("almost") == -1) {
        value = 5;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("almost never feels discouraged") != -1) {
        value = 17;
        trait = "Depression";
		type = "Trait";
    } else if (verbal.search("rarely feels discouraged") != -1) {
        value = 32;
        trait = "Depression";
		type = "Trait";
    }
    // DUTIFULNESS
    else if (verbal.search("profound sense of duty") != -1) {
        value = 95;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("strong sense of duty") != -1) {
        value = 83;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("sense of duty") != -1) {
        value = 68;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("average dutifulness") != -1) {
        value = 50;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("contracts and other confining") != -1) {
        value = 5;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("dislikes contracts and regulations") != -1) {
        value = 17;
        trait = "Dutifulness";
		type = "Trait";
    } else if (verbal.search("finds rules confining") != -1) {
        value = 32;
        trait = "Dutifulness";
		type = "Trait";
    }
    // EMOTIONALITY
    else if (verbal.search("profound understanding") != -1 && verbal.search("own emotions") != -1) {
        value = 95;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("great awareness") != -1 && verbal.search("own emotions") != -1) {
        value = 83;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("good awareness") != -1 && verbal.search("own emotions") != -1) {
        value = 68;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("average emotionality") != -1) {
        value = 50;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("does not display") != -1 && verbal.search("own emotions") != -1) {
        value = 5;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("mostly unaware") != -1 && verbal.search("own emotions") != -1) {
        value = 17;
        trait = "Emotionality";
		type = "Trait";
    } else if (verbal.search("tends not to openly express emotions") != -1) {
        value = 32;
        trait = "Emotionality";
		type = "Trait";
    }
    // EXCITEMENT SEEKING
    else if (verbal.search("lives for risk") != -1) {
        value = 95;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("risk-taker and a thrill-seeker") != -1) {
        value = 83;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("loves a good thrill") != -1) {
        value = 68;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("average excitement seeking") != -1) {
        value = 50;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("entirely adverse to risk") != -1) {
        value = 5;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("need thrills or risks") != -1) {
        value = 17;
        trait = "Excitement_Seeking";
		type = "Trait";
    } else if (verbal.search("not a risk-taker") != -1) {
        value = 32;
        trait = "Excitement_Seeking";
		type = "Trait";
    }
    // FRIENDLINESS
    else if (verbal.search("genuinely likes others") != -1) {
        value = 95;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("makes friends quickly") != -1) {
        value = 83;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("very friendly") != -1) {
        value = 68;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("average friendliness") != -1) {
        value = 50;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("incredibly distant and reserved") != -1) {
        value = 5;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("very distant and reserved") != -1) {
        value = 17;
        trait = "Friendliness";
		type = "Trait";
    } else if (verbal.search("somewhat reserved") != -1) {
        value = 32;
        trait = "Friendliness";
		type = "Trait";
    }
    // GREGARIOUSNESS
    else if (verbal.search("treasures the company of others") != -1) {
        value = 95;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("enjoys being in crowds") != -1) {
        value = 83;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("enjoys the company of others") != -1) {
        value = 68;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("average gregariousness") != -1) {
        value = 50;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("spending time alone much more") != -1) {
        value = 5;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("prefers to be alone") != -1) {
        value = 17;
        trait = "Gregariousness";
		type = "Trait";
    } else if (verbal.search("tends to avoid crowds") != -1) {
        value = 32;
        trait = "Gregariousness";
		type = "Trait";
    }
    // IMAGINATION
    else if (verbal.search("bored by reality") != -1) {
        value = 95;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("incredibly creative") != -1) {
        value = 83;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("fertile imagination") != -1) {
        value = 68;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("average imagination") != -1) {
        value = 50;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("interested only in facts") != -1) {
        value = 5;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("grounded in reality") != -1) {
        value = 17;
        trait = "Imagination";
		type = "Trait";
    } else if (verbal.search("flights of fancy") != -1) {
        value = 32;
        trait = "Imagination";
		type = "Trait";
    }
    // IMMODERATION
    else if (verbal.search("ruled by irresistible cravings") != -1) {
        value = 95;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("feels strong urges") != -1) {
        value = 83;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("occasionally overindulges") != -1 || verbal.search("occassionally overindulges") != -1) {
        value = 68;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("average immoderation") != -1) {
        value = 55;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("never feels tempted") != -1) {
        value = 5;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("rarely feels strong cravings") != -1) {
        value = 17;
        trait = "Immoderation";
		type = "Trait";
    } else if (verbal.search("experience strong cravings") != -1) {
        value = 32;
        trait = "Immoderation";
		type = "Trait";
    }
    // INTELLECTUAL CURIOSITY
    else if (verbal.search("entranced by riddles") != -1) {
        value = 95;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("new and fresh ideas") != -1) {
        value = 83;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("open-minded to new ideas") != -1) {
        value = 68;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("average intellectual curiosity") != -1) {
        value = 50;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("uninterested in ideas") != -1) {
        value = 5;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("regards intellectual exercises") != -1) {
        value = 17;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    } else if (verbal.search("dislikes intellectual discussions") != -1) {
        value = 32;
        trait = "Intellectual_Curiosity";
		type = "Trait";
    }
    // LIBERALISM
    else if (verbal.search("revels in chaos") != -1) {
        value = 95;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("loves to defy convention") != -1) {
        value = 83;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("put off by authority") != -1) {
        value = 68;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("average liberalism") != -1) {
        value = 50;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("ardent believer in convention") != -1) {
        value = 5;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("prefers stability and security") != -1) {
        value = 17;
        trait = "Liberalism";
		type = "Trait";
    } else if (verbal.search("admires tradition") != -1) {
        value = 32;
        trait = "Liberalism";
		type = "Trait";
    }
    // MODESTY
    else if (verbal.search("never claim to be better") != -1) {
        value = 95;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("immodesty distasteful") != -1) {
        value = 83;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("average modesty") != -1) {
        value = 50;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("would never shy away") != -1) {
        value = 5;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("very willing to compare") != -1) {
        value = 17;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("immodest") != -1) {
        value = 32;
        trait = "Modesty";
		type = "Trait";
    } else if (verbal.search("modest") != -1) {
        value = 68;
        trait = "Modesty";
		type = "Trait";
    }
    // ORDERLINESS
    else if (verbal.search("loves to make lists") != -1) {
        value = 95;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("well-organized life") != -1) {
        value = 83;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("average orderliness") != -1) {
        value = 50;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("completely disorganized") != -1) {
        value = 5;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("very disorganized") != -1) {
        value = 17;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("disorganized") != -1) {
        value = 32;
        trait = "Orderliness";
		type = "Trait";
    } else if (verbal.search("organized") != -1) {
        value = 68;
        trait = "Orderliness";
		type = "Trait";
    }
    // SELF-CONSCIOUSNESS
    else if (verbal.search("socially crippled") != -1) {
        value = 95;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("rejection and ridicule") != -1) {
        value = 83;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("average self-consciousness") != -1) {
        value = 50;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("self-conscious") != -1) {
        value = 68;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("absolutely unfazed") != -1) {
        value = 5;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("very comfortable in social situations") != -1) {
        value = 17;
        trait = "Self_Consciousness";
		type = "Trait";
    } else if (verbal.search("comfortable in social situations") != -1) {
        value = 32;
        trait = "Self_Consciousness";
		type = "Trait";
    }
    // SELF-DISCIPLINE
    else if (verbal.search("will persist in the face") != -1) {
        value = 95;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("great willpower") != -1) {
        value = 83;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("self-disciplined") != -1) {
        value = 68;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("average self-discipline") != -1) {
        value = 50;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("rarely completes tasks") != -1) {
        value = 5;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("little self-discipline") != -1) {
        value = 17;
        trait = "Self_Discipline";
		type = "Trait";
    } else if (verbal.search("procrastination") != -1) {
        value = 32;
        trait = "Self_Discipline";
		type = "Trait";
    }
    // SELF-EFFICACY
    else if (verbal.search("incredibly confident") != -1) {
        value = 95;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("very confident") != -1) {
        value = 83;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("confident") != -1 && verbal.search("under") == -1) {
        value = 68;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("average self-efficacy") != -1) {
        value = 50;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("feels as if") != -1 && verbal.search("not in control") != -1) {
        value = 5;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("does not feel effective") != -1) {
        value = 17;
        trait = "Self_Efficacy";
		type = "Trait";
    } else if (verbal.search("lacks confidence") != -1) {
        value = 32;
        trait = "Self_Efficacy";
		type = "Trait";
    }
    // STRAIGHTFORWARDNESS
    else if (verbal.search("incredibly frank and candid") != -1) {
        value = 95;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("very straightforward") != -1) {
        value = 83;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("candid and sincere") != -1) {
        value = 68;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("average straightforwardness") != -1) {
        value = 55;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("some deception is necessary") != -1) {
        value = 5;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("not straightforward") != -1) {
        value = 17;
        trait = "Straightforwardness";
		type = "Trait";
    } else if (verbal.search("guarded in relationships") != -1) {
        value = 32;
        trait = "Straightforwardness";
		type = "Trait";
    }
    // SYMPATHY
    else if (verbal.search("incredibly compassionate") != -1) {
        value = 95;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("compassionate") != -1) {
        value = 68;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("average sympathy") != -1) {
        value = 50;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("tempered by mercy or pity") != -1) {
        value = 5;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("suffering of others") != -1) {
        value = 17;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("not easily moved to pity") != -1) {
        value = 32;
        trait = "Sympathy";
		type = "Trait";
    } else if (verbal.search("easily moved to pity") != -1) {
        value = 83;
        trait = "Sympathy";
		type = "Trait";
    }
    // TRUST
    else if (verbal.search("naturally trustful") != -1) {
        value = 95;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("very trusting") != -1) {
        value = 83;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("trusting") != -1) {
        value = 68;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("average trust") != -1) {
        value = 50;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("selfish and conniving") != -1) {
        value = 5;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("not trust others") != -1) {
        value = 17;
        trait = "Trust";
		type = "Trait";
    } else if (verbal.search("slow to trust") != -1) {
        value = 32;
        trait = "Trust";
		type = "Trait";
    }
    // VULNERABILITY
    else if (verbal.search("completely helpless") != -1) {
        value = 95;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("cracks easily") != -1) {
        value = 83;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("handle stress well") != -1) {
        value = 68;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("average vulnerability") != -1) {
        value = 45;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("effects of stress") != -1) {
        value = 5;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("confident under pressure") != -1) {
        value = 17;
        trait = "Vulnerability";
		type = "Trait";
    } else if (verbal.search("can handle stress") != -1) {
        value = 32;
        trait = "Vulnerability";
		type = "Trait";
    } else {
        
        changelogupdate("Error! Counselor could not evaluate your verbal input.");
        return;
    }
    return [type, trait, value];
}

function verbapprox(type, trait, value) {
	
	dwarves[currentDwarf][(type == "Trait" ? "traits" : "attributes")][trait.toLowerCase()] = value;
	
    attributeUpdate();
    traitUpdate();
	
    

    guide();
    changelogupdate(trait + " set to " + value + " by Counselor.");
}

function minusattrtopct(newattr) {
    var x = newattr;
    var xpct;
    if (x <= 599) {
        xpct = Math.round((0.0370356 * x) - 5.51835)
    } else if (x >= 600 && x <= 799) {
        xpct = Math.round((0.0837487 * x) - 33.5822)
    } else if (x >= 800 && x <= 899) {
        xpct = Math.round((0.168333 * x) - 101.333)
    } else if (x >= 900 && x <= 999) {
        xpct = Math.round((0.168343 * x) - 101.509)
    } else if (x >= 1000 && x <= 1099) {
        xpct = Math.round((0.168343 * x) - 101.676)
    } else if (x >= 1100) {
        xpct = Math.round((0.0417669 * x) + 37.3904)
    };
    return xpct;
}

function avgattrtopct(newattr) {
    var x = newattr;
    var xpct;
    if (x <= 749) {
        xpct = Math.round((0.030357 * x) - 6.0714)
    } else if (x >= 750 && x <= 899) {
        xpct = Math.round((0.111852 * x) - 67.2223)
    } else if (x >= 900 && x <= 999) {
        xpct = Math.round((0.168333 * x) - 118.166)
    } else if (x >= 1000 && x <= 1099) {
        xpct = Math.round((0.168343 * x) - 118.343)
    } else if (x >= 1100 && x <= 1299) {
        xpct = Math.round((0.0837538 * x) - 25.4621)
    } else if (x >= 1300) {
        xpct = Math.round((0.0238412 * x) + 52.3404)
    };
    return xpct;
}

function plusattrtopct(newattr) {
    var x = newattr;
    var xpct;
    if (x <= 949) {
        xpct = Math.round((0.0333988 * x) - 15.0295)
    } else if (x >= 950 && x <= 1149) {
        xpct = Math.round((0.0837487 * x) - 62.8943)
    } else if (x >= 1150 && x <= 1249) {
        xpct = Math.round((0.168333 * x) - 160.249)
    } else if (x >= 1250 && x <= 1349) {
        xpct = Math.round((0.168343 * x) - 160.429)
    } else if (x >= 1350 && x <= 1549) {
        xpct = Math.round((0.0837538 * x) - 46.4006)
    } else if (x >= 1550) {
        xpct = Math.round((0.0238412 * x) + 46.3801)
    };
    return xpct;
}

function dubplusattrtopct(newattr) {
    var x = newattr;
    var xpct;
    if (x <= 1199) {
        xpct = Math.round((0.0333988 * x) - 23.3792)
    } else if (x >= 1200 && x <= 1399) {
        xpct = Math.round((0.0837487 * x) - 83.8315)
    } else if (x >= 1400 && x <= 1499) {
        xpct = Math.round((0.168333 * x) - 202.333)
    } else if (x >= 1500 && x <= 1599) {
        xpct = Math.round((0.168343 * x) - 202.515)
    } else if (x >= 1600 && x <= 1799) {
        xpct = Math.round((0.0837538 * x) - 67.339)
    } else if (x >= 1800) {
        xpct = Math.round((0.0238412 * x) + 40.4198)
    };
    return xpct;
}

function guide() {
	var dwarf = dwarves[currentDwarf];
	
    var bodyattrpct = {};
    bodyattrpct['strength'] = plusattrtopct(dwarf.attributes['strength']);
    bodyattrpct['agility'] = minusattrtopct(dwarf.attributes['agility']);
    bodyattrpct['toughness'] = plusattrtopct(dwarf.attributes['toughness']);
    bodyattrpct['endurance'] = avgattrtopct(dwarf.attributes['endurance']);
    bodyattrpct['disease resistance'] = avgattrtopct(dwarf.attributes['disease resistance']);
    bodyattrpct['recuperation'] = avgattrtopct(dwarf.attributes['recuperation']);
	
    var soulattrpct = {};
    soulattrpct[0] = plusattrtopct(dwarf.attributes['analytical ability']);
    soulattrpct[1] = plusattrtopct(dwarf.attributes['memory']);
    soulattrpct[2] = plusattrtopct(dwarf.attributes['creatvity']);
    soulattrpct[3] = avgattrtopct(dwarf.attributes['intuition']);
    soulattrpct[4] = dubplusattrtopct(dwarf.attributes['focus']);
    soulattrpct[5] = avgattrtopct(dwarf.attributes['willpower']);
    soulattrpct[6] = plusattrtopct(dwarf.attributes['patience']);
    soulattrpct[7] = dubplusattrtopct(dwarf.attributes['spatial sense']);
    soulattrpct[8] = avgattrtopct(dwarf.attributes['kinaesthetic sense']);
    soulattrpct[9] = avgattrtopct(dwarf.attributes['linguistic ability']);
    soulattrpct[10] = avgattrtopct(dwarf.attributes['musicality']);
    soulattrpct[11] = avgattrtopct(dwarf.attributes['empathy']);
    soulattrpct[12] = avgattrtopct(dwarf.attributes['social awareness']);
	
    var minbit = Math.round((bodyattrpct['strength'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6); //STEWSsKs
    var crafter = Math.round((bodyattrpct['agility'] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 4); //ACSsKs
    var carpenter = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 5); //SACSsKs
    var armwork = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6); //SAEWSsKs
    var urist = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 6); //SAECSsKs
    var ranged = Math.round((bodyattrpct['agility'] + soulattrpct[4] + soulattrpct[7] + soulattrpct[8]) / 4); //AFSsKs
    var anicar = Math.round((bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[1] + soulattrpct[11]) / 4); //AAaMEm
    var ickguts = Math.round((bodyattrpct['agility'] + soulattrpct[8]) / 2); //AKs
    var anitra = Math.round((bodyattrpct['agility'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[3] + soulattrpct[6] + soulattrpct[11]) / 6); //ATEIPEm
    var trapper = Math.round((bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 4); //AAaCSs
    var bonedoc = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + soulattrpct[4] + soulattrpct[7] + soulattrpct[8]) / 5); //SAFSsKs
    var crutch = Math.round((bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 5); //AEWSsKs
    var whatthat = Math.round((soulattrpct[0] + soulattrpct[1] + soulattrpct[3]) / 3); //AaMI
    var wnddrs = Math.round((bodyattrpct['agility'] + soulattrpct[7] + soulattrpct[8] + soulattrpct[11]) / 4); //ASsKsEm
    var brewbal = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + soulattrpct[8]) / 3); //SAKs
    var agri = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[8]) / 4); //SAEKs
    var behold = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[0] + soulattrpct[2] + soulattrpct[8]) / 6); //SAEAaCKs
    var cook = Math.round((bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[2] + soulattrpct[8]) / 4); //AAaCKs
    var herbs = Math.round((bodyattrpct['agility'] + soulattrpct[1] + soulattrpct[8]) / 3); //AMKs
    var ashy = Math.round((bodyattrpct['strength'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[8]) / 4); //STEKs
    var fishclean = Math.round((bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[8]) / 3); //AEKs
    var fishcatch = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + soulattrpct[4] + soulattrpct[6] + soulattrpct[8]) / 5); //SAFPKs
    var furnace = Math.round((bodyattrpct['strength'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[0] + soulattrpct[8]) / 5); //STEAaKs
    var cutter = Math.round((bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[7] + soulattrpct[8]) / 4); //AAaSsKs
    var extract = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[0] + soulattrpct[8]) / 5); //SAEAaKs
    var mecheng = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['endurance'] + soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 6); //SAEAaCSs
    var heavy = Math.round((bodyattrpct['strength'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[5] + soulattrpct[8]) / 5); //STEWKs
    var siegeop = ((bodyattrpct['strength'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[0] + soulattrpct[4] + soulattrpct[7]) / 6); //STEAaFSs
    var alch = Math.round((bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[2] + soulattrpct[3]) / 4); //AAaCI
    var knap = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + soulattrpct[0] + soulattrpct[7] + soulattrpct[8]) / 5); //SAAaSsKs
    var buildit = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 3); //AaCSs
    var manage = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[12]) / 3); //AaCSa
    var bookstud = Math.round((soulattrpct[0] + soulattrpct[1] + soulattrpct[4]) / 3); //AaMF
    var dodger = Math.round((bodyattrpct['agility'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6); //ATEWSsKs
    var combat = Math.round((bodyattrpct['strength'] + bodyattrpct['agility'] + bodyattrpct['toughness'] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6); //SATWSsKs
    var social = Math.round((soulattrpct[9] + soulattrpct[11] + soulattrpct[12]) / 3); //LEmSa
    var comedy = Math.round((bodyattrpct['agility'] + soulattrpct[2] + soulattrpct[8] + soulattrpct[9]) / 4); //ACKsL
    var intim = Math.round((bodyattrpct['agility'] + soulattrpct[8] + soulattrpct[9]) / 3); //AKsL
    var joi = Math.round((soulattrpct[3] + soulattrpct[11] + soulattrpct[12]) / 3); //IEmSa
    var liar = Math.round((soulattrpct[2] + soulattrpct[9] + soulattrpct[12]) / 3); //CLSa
    var concen = Math.round((soulattrpct[4] + soulattrpct[5] + soulattrpct[6]) / 3); //FWP
    var obser = Math.round((soulattrpct[3] + soulattrpct[4] + soulattrpct[7]) / 3); //IFSs
    var tactic = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[3]) / 3); //AaCI
    var druid = Math.round((bodyattrpct['agility'] + bodyattrpct['toughness'] + bodyattrpct['endurance'] + soulattrpct[4] + soulattrpct[5] + soulattrpct[11]) / 6); //ATEFWEm
    var tracker = Math.round((soulattrpct[0] + soulattrpct[4] + soulattrpct[7]) / 3); //AaFSs
    var discip = Math.round((bodyattrpct['disease resistance'] + soulattrpct[5]) / 2); //FW
    var wordwork = Math.round((soulattrpct[2] + soulattrpct[3] + soulattrpct[9]) / 3); //CIL
    var reading = Math.round((soulattrpct[1] + soulattrpct[4] + soulattrpct[9]) / 3); //MFL
    var speaking = Math.round(soulattrpct[9]); //L
    var coord = Math.round((bodyattrpct['agility'] + bodyattrpct[7] + soulattrpct[8]) / 3); //ASsKs
	
    var analysis = {
		'superb': [],
		'verygood': [],
		'good': [],
		'highavg': [],
		'lowavg': [],
		'poor': [],
		'verypoor': [],
		'horrible': [],
		'output': []
	}
	
    if (dwarf.gender == "Male") {
        var subjpro = "He";
        var objpro = "Him";
        var lexpro = "Himself";
        var posspro = "His";
        var detpro = "His";
    } else {
        var subjpro = "She";
        var objpro = "Her";
        var lexpro = "Herself";
        var posspro = "Hers";
        var detpro = "Her";
    }
	
    jobrate("Socializer;", social, "Socializer");
    jobrate("Ranged combat dwarf;", ranged, "Ranged");
    jobrate("Close combat dwarf;", combat, "Close");
    // jobrate("Balance;",brewbal);
    // jobrate("Coordination;",coord);
    // jobrate("Speaker;",speaking);
    // jobrate("Reader;",reading);
    // jobrate("Writer;",wordwork);
    // jobrate("Wordsmith;",wordwork);
    // jobrate("Poet;",wordwork);
    // jobrate("Disciplinarian;",discip);
    // jobrate("Tracker;",tracker);
    // jobrate("Druid;",druid);
    // jobrate("Military tactician;",tactic);
    jobrate("Student;", bookstud, "Student");
    jobrate("Observer;", obser, "Observation");
    // jobrate("Concentrator;",concen); 
    if (dwarf.traits['straightforwardness'] < 40) {
        jobrate("Liar;", liar, "Lying");
    }
    jobrate("Judge of intent;", joi, "Judging Intent");
    if (dwarf.traits['cooperation'] <= 60) {
        jobrate("Intimidator;", intim, "Intimidation");
    };
    if (dwarf.traits['self-consciousness'] <= 75) {
        jobrate("Comedian;", comedy, "Comedy");
    };
    jobrate("Wrestler;", armwork, "Wrestling");
    jobrate("Dodger;", dodger, "Dodging");
    jobrate("Biter;", minbit, "Bitting");
    jobrate("Armor user;", heavy, "Armor");
    jobrate("Record keeper;", bookstud, "Record Keeping");
    jobrate("Organizer;", manage, "Organization");
    jobrate("Building designer;", buildit, "Building Design");
    jobrate("Appraiser;", whatthat, "Appraisal");
    // jobrate("Knapper;",knap);
    jobrate("Swimmer;", armwork, "Swimming");
    // jobrate("Alchemist;",alch);
    jobrate("Siege operator;", siegeop, "Siege Operation");
    jobrate("Siege engineer;", mecheng, "Siege Engineering");
    jobrate("Pump operator;", heavy, "Pump Operation");
    jobrate("Mechanic;", mecheng, "Machinery");
    jobrate("Strand extractor;", extract, "Strand Extracting");
    jobrate("Wood crafter;", crafter, "Wood Crafting");
    jobrate("Weaver;", crafter, "Weaving");
    jobrate("Stone crafter;", crafter, "Stone Crafting");
    jobrate("Leatherworker;", urist, "Leatherworkering");
    jobrate("Glassmaker;", urist, "Glassmaker");
    jobrate("Clothier;", crafter, "Clothier");
    jobrate("Bone carver;", crafter, "Bone Carving");
    jobrate("Gem setter;", crafter, "Gem Setting");
    jobrate("Gem cutter;", cutter, "Gem Cutting");
    jobrate("Weaponsmith;", urist, "Weaponsmithing");
    jobrate("Metalsmith;", urist, "Metalsmithing");
    jobrate("Metal crafter;", urist, "Metal Crafting");
    jobrate("Furnace operator;", furnace, "Furnace Operation");
    jobrate("Armorsmith;", urist, "Armorsmithing");
    jobrate("Fisherdwarf;", fishcatch, "Fisherdwarf");
    jobrate("Fish dissector;", ickguts, "Fish Dissecting");
    jobrate("Fish cleaner;", fishclean, "Fish Cleaning");
    jobrate("Wood burner;", ashy, "Wood Burning");
    jobrate("Thresher;", agri, "Threshing");
    jobrate("Tanner;", ickguts, "Tanning");
    jobrate("Soaper;", ashy, "Soap Making");
    jobrate("Potash maker;", ashy, "Potash Making");
    jobrate("Miller;", agri, "Milling");
    jobrate("Milker;", agri, "Milking");
    jobrate("Lye maker;", ashy, "Lye Making");
    jobrate("Herbalist;", herbs, "Herbalist");
    jobrate("Grower;", agri, "Growing");
    jobrate("Dyer;", agri, "Dying");
    jobrate("Cook;", cook, "Cooking");
    jobrate("Cheese maker;", behold, "Cheese Making");
    jobrate("Butcher;", agri, "Butchery");
    jobrate("Brewer;", brewbal, "Brewery");
    jobrate("Wound dresser;", wnddrs, "Wound Dressing");
    jobrate("Suturer;", ranged, "Suturing");
    jobrate("Surgeon;", ranged, "Surgery");
    jobrate("Diagnostician;", whatthat, "Diagnostics");
    jobrate("Crutch walker;", crutch, "Crutch");
    jobrate("Bone doctor;", bonedoc, "Bone Setting");
    jobrate("Trapper;", trapper, "Trapping");
    jobrate("Animal trainer;", anitra, "Animal Training");
    jobrate("Animal dissector;", ickguts, "Small Animal Dissection");
    // jobrate("Animal caretaker;",anicar);
    // jobrate("Ambusher;",ranged);
    jobrate("Mason;", urist, "Masonry");
    jobrate("Engraver;", crafter, "Engraver");
    jobrate("Wood cutter;", armwork, "Wood");
    jobrate("Carpenter;", carpenter, "Carpenter");
    jobrate("Bowyer;", crafter, "Bowyer");
    jobrate("Miner;", minbit, "Mining");
	
	
	
	
    if (analysis.superb.length >= 1) {
        analysis.superb.unshift('<div class="guidances"><p>' + subjpro + " bears the mien of a superb:</p> <ul>");
        analysis.superb.push("</ul></div>")
    };
    if (analysis.verygood.length >= 1) {
        analysis.verygood.unshift('<div class="guidances"><p>' + subjpro + " has the potential to be a very good:</p> <ul>");
        analysis.verygood.push("</ul></div>");
    };
	
    if (analysis.good.length >= 1) {
        analysis.good.unshift('<div class="guidances"><p>' + subjpro + " has the look of a good:</p> <ul>");
        analysis.good.push("</ul></div>");
    };
	
    if (analysis.highavg.length >= 1) {
        analysis.highavg.unshift('<div class="guidances"><p>' + subjpro + " will be a little better than most as a:</p> <ul>");
        analysis.highavg.push("</ul></div>");
    };
	
    if (analysis.lowavg.length >= 1) {
        analysis.lowavg.unshift('<div class="guidances"><p>' + subjpro + " comes across as a below average:</p> <ul>");
        analysis.lowavg.push("</ul></div>");
    };
	
    if (analysis.poor.length >= 1) {
        analysis.poor.unshift('<div class="guidances"><p>' + subjpro + " will make a poor:</p> <ul>");
        analysis.poor.push("</ul></div>");
    };
	
    if (analysis.verypoor.length >= 1) {
        analysis.verypoor.unshift('<div class="guidances"><p>' + subjpro + " seems like a very poor:</p> <ul>");
        analysis.verypoor.push("</ul></div>");
    };
	
    if (analysis.horrible.length >= 1) {
        analysis.horrible.unshift('<div class="guidances"><p>' + subjpro + " would be horrible as a:</p> <ul>");
        analysis.horrible.push("</ul></div>");
    };
	
	/*
		
	*/
	var brightside = $("brightside").checked;
    if (brightside && analysis.superb.length + analysis.verygood.length + good.length + highavg.length < 20) {
        analysis.output.push(analysis.superb + " " + analysis.verygood + " " + analysis.good + " " + analysis.highavg + " " + analysis.lowavg);
    } else if (brightside && analysis.superb.length + verygood.length + good.length < 20) {
        analysis.output.push(analysis.superb + " " + analysis.verygood + " " + analysis.good + " " + analysis.highavg);
    } else if (brightside) {
        analysis.output.push(analysis.superb + " " + analysis.verygood + " " + good);
    } else {
        analysis.output.push(analysis.superb + " " + analysis.verygood + " " + analysis.good + " " + analysis.poor + " " + analysis.verypoor + " " + analysis.horrible);
    }
	
    if (dwarf.traits['self-discipline'] < 25) {
        analysis.output.push('<p>This lazy sack of booze prefers to spend time <span class="horrible"' + ">On Break.</span>");
    } else if (dwarf.traits['self-discipline'] > 75) {
        analysis.output.push("<p>Excellent! " + detpro + ' breaks will be <span class="superb"' + ">shorter</span> than most.");
    }
    if (dwarf.traits['anger'] < 25) {
        analysis.output.push('<p>' + subjpro + ' can\'t find the spirit to <span class="horrible"' + ">rage</span> in battle.");
    } else if (dwarf.traits['anger'] > 75) {
        analysis.output.push("<p>When battles go poorly, " + subjpro.toLowerCase() + ' is prone to flying against the enemy in a <span class="superb"' + ">rage.</span>");
    }
    if (dwarf.traits['altruism'] < 40) {
        analysis.output.push('<p>' + subjpro + ' seems unhappy at the thought of <span class="horrible"' + ">helping others</span>.");
    } else if (dwarf.traits['altruism'] > 60) {
        analysis.output.push('<p>' + subjpro + ' seems happy at the thought of <span class="superb"' + ">helping others</span>.");
    }
    if (dwarf.traits['assertiveness'] < 40) {
        analysis.output.push(detpro + " unassertive nature won\'t allow " + objpro.toLowerCase() + ' to attempt <span class="horrible"' + ">Persuasion</span>.");
    }
    if (dwarf.traits['cooperation'] < 40) {
        analysis.output.push('<p>' + subjpro + ' cannot be relied on to <span class="horrible"' + ">Pacify</span> others.");
    } else if (dwarf.traits['cooperation'] > 60) {
        analysis.output.push("<p>A communitarian dwarf; " + subjpro.toLowerCase() + ' will never <span class="horrible"' + ">Intimidate</span> others.");
    }
    if (dwarf.traits['friendliness'] < 40) {
        analysis.output.push('<p>When others try to start a <span class="horrible"' + ">Conversation</span>; " + subjpro.toLowerCase() + " doesn't respond.");
    }
    if (dwarf.traits['self-consciousness'] > 75) {
        analysis.output.push("<p>Held back by self-consciousness; " + subjpro.toLowerCase() + ' will not attempt <span class="horrible"' + ">Comedy</span>.");
    }
    if (dwarf.traits['straightforwardness'] < 40) {
        analysis.output.push('<p>' + subjpro + ' cannot be honest enough to <span class="horrible"' + ">Console</span> another.");
    } else if (dwarf.traits['straightforwardness'] > 39 && dwarf.traits['straightforwardness'] < 61) {
        analysis.output.push('<p>' + subjpro + ' is too direct to <span class="horrible"' + ">Lie</span>.");
    } else if (dwarf.traits['straightforwardness'] > 60) {
        analysis.output.push('<p>' + subjpro + ' is too straightforward to <span class="horrible"' + '>Lie</span> or <span class="horrible"' + ">Flatter</span>.");
    }
	
    var guideprint = analysis.output.toString();
    guideprint = guideprint.replace(/,/g, " ");
    guideprint = guideprint.replace(/\u003B/g, "");
    $("guidance").innerHTML = guideprint;
}


function setColors() {
	document.body.className = ($('colorcode').checked ? 'color' : '');
}
//-->
</script>
</head>
<body class="color">
Welcome to the Dwarven Guidance Counselor. I'll be offering you advice today. Shall I color-code your evaluation? <input type="checkbox" id="colorcode" onclick="setColors();" checked><br> 
What's your name, please? <input type="text" id="dwarfname" value="Urist McAverage" onKeyPress="return disableEnterKey(event)" onkeyup="printname()">
And your gender? <input type="radio" name="gender" id="male" value="Male" checked="checked" onclick="printgender(this.value)">Male</input> <input type="radio" name="gender" id="female" value="Female" onclick="printgender(this.value)">Female</input> 
&nbsp;Are we looking on the bright side today? <input type="checkbox" id="brightside" onchange=""><br>


<p>
<table>

<tr>
<td valign="top"><button onclick="xmlprocess()">Load from XML</button></td>
<td><select id="dwarflist" onchange="viewDwarf()"><option>Dwarf List</option></select><button onclick="xmlprocess()">U</button></td>
<td>&nbsp;Find Best&nbsp;
<select id="joblist" onchange="bestdwarf()">

<option>Embark Facts</option>
<option>Leader/Manager</option>
<option>Broker</option>
<option>Close combat dwarf</option>
<option>Ranged combat dwarf</option>
<option>Socializer</option>
<option>Miner</option>
<option>Bowyer</option>
<option>Carpenter</option>
<option>Wood cutter</option>
<option>Engraver</option>

<option>Mason</option>
<option>Animal dissector</option>
<option>Animal trainer</option>
<option>Trapper</option>
<option>Bone doctor</option>
<option>Crutch walker</option>
<option>Diagnostician</option>
<option>Surgeon</option>
<option>Suturer</option>
<option>Wound dresser</option>

<option>Brewer</option>
<option>Butcher</option>
<option>Cheese maker</option>
<option>Cook</option>
<option>Dyer</option>
<option>Grower</option>
<option>Herbalist</option>
<option>Lye maker</option>
<option>Milker</option>
<option>Miller</option>

<option>Potash maker</option>
<option>Soaper</option>
<option>Tanner</option>
<option>Thresher</option>
<option>Wood burner</option>
<option>Fish cleaner</option>
<option>Fish dissector</option>
<option>Fisherdwarf</option>
<option>Armorsmith</option>
<option>Furnace operator</option>

<option>Metal crafter</option>
<option>Metalsmith</option>
<option>Weaponsmith</option>
<option>Gem cutter</option>
<option>Gem setter</option>
<option>Bone carver</option>
<option>Clothier</option>
<option>Glassmaker</option>
<option>Leatherworker</option>
<option>Stone crafter</option>

<option>Weaver</option>
<option>Wood crafter</option>
<option>Strand extractor</option>
<option>Mechanic</option>
<option>Pump operator</option>
<option>Siege engineer</option>
<option>Siege operator</option>
<option>Swimmer</option>
<option>Appraiser</option>
<option>Building designer</option>

<option>Organizer</option>
<option>Record keeper</option>
<option>Armor user</option>
<option>Biter</option>
<option>Dodger</option>
<option>Wrestler</option>
<option>Comedian</option>
<option>Intimidator</option>
<option>Judge of intent</option>
<option>Liar</option>

<option>Observer</option>
<option>Student</option>

</select>
<button onclick="bestdwarf()">U</button></td>
<td valign="top" rowspan="5">Find Best Among:<p>
<select id="dwarfsfrom" multiple="true" size="6" onchange="bestdwarf()">
<option>All Dwarves</option>
</select>
</td>
<td valign="top" rowspan="5">
Last 5 updates (most recent first):<p>
<a id="changelogoutput"> </a>
</td>
</tr>

<tr>
<td valign="top">Body Attributes&nbsp;</td>
<td><input type="text" id="directbodynum" maxlength="4" onKeyPress="return disablebodyenter(event)"></td>
<td>
<select id="directbody">
<option>Strength</option>
<option>Agility</option>
<option>Toughness</option>
<option>Endurance</option>
<option>Disease Resistance</option>
<option>Recuperation</option>
</select>
<button type="button" onclick="directBodySubmit()">Update</button>
</td>
</tr>

<tr>
<td valign="top">Soul Attributes&nbsp;</td>
<td><input type="text" id="directsoulnum" maxlength="4" onKeyPress="return disablesoulenter(event)"></td>
<td>
<select id="directsoul">
<option>Analytical Ability</option>
<option>Memory</option>
<option>Creativity</option>
<option>Intuition</option>
<option>Focus</option>
<option>Willpower</option>
<option>Patience</option>
<option>Spatial Sense</option>
<option>kinaesthetic Sense</option>
<option>Linguistic Ability</option>
<option>Musicality</option>
<option>Empathy</option>
<option>Social Awareness</option>
</select>
<button type="button" onclick="directSoulSubmit()">Update</button>
</td>
</tr>

<tr>
<td valign="top">Personality Traits&nbsp;</td>
<td><input type="text" id="directpersnum" maxlength="3" onKeyPress="return disablepersenter(event)"></td>
<td>
<select id="directpers">
<option>Achievement Striving (Excellence)</option>
<option>Activity Level (Activeness)</option>
<option>Adventurousness (Adventure)</option>
<option>Altruism (Helpfulness)</option>
<option>Anger (Rage)</option>
<option>Anxiety (Nervousness)</option>
<option>Artistic Interest (Artistic)</option>
<option>Assertiveness (Leadership)</option>
<option>Cautiousness</option>
<option>Cheerfulness (Optimism)</option>
<option>Cooperation (Compromising)</option>
<option>Depression</option>
<option>Dutifulness (Lawfulness)</option>
<option>Emotionality (Emotion)</option>
<option>Excitement Seeking (Thrillseeking)</option>
<option>Friendliness (Friendly)</option>
<option>Gregariousness (Company)</option>
<option>Imagination</option>
<option>Immoderation (Urge)</option>
<option>Intellectual Curiosity (Thinking)</option>
<option>Liberalism (Rebelliousness)</option>
<option>Modesty</option>
<option>Orderliness (Organization)</option>
<option>Self-Consciousness (Neurosis)</option>
<option>Self-Discipline (Perseverance)</option>
<option>Self-Efficacy (Confidence)</option>
<option>Straightforwardness (Honesty)</option>
<option>Sympathy (Compassion)</option>
<option>Trust (Trusting)</option>
<option>Vulnerability (Stress)</option>
</select>
<button type="button" onclick="directTraitSubmit()">Update</button>&nbsp;
</td>
</tr>

<tr>
<td valign="top">Thoughts and Preferences&nbsp;</td>
<td colspan="2"><input type="text" id="verbaleval" size="71" onKeyPress="return disableverbenter(event)"></td>
</tr>

</table>

<br>
<table border="1">
<tr>
<td colspan="3"><div style="text-align:center"><b>Attributes and Traits of: <a id="printdwarf">Urist McAverage</a>, <a id="printdwarfgender">&#9794;</a></b></div></td>
<td rowspan="19" valign="top"><div style="text-align:center"><b>Guidance for: <a id="printdwarf2">Urist McAverage</a>, <a id="printdwarfgender2">&#9794;</a></b></div><span id="guidance">A short, sturdy creature fond of drink and industry.</span</td>
</tr>
<tr>
<th>Body Attributes</th>
<th>Soul Attributes</th>
<th>Personality Traits</th>
</tr>
<tr>
<td><a id="strength"> </a>&nbsp;Strength</td>
<td><a id="musicality"> </a>&nbsp;Musicality</td>
<td><a id="emotionality"> </a>&nbsp;Emotionality</td>
</tr>
<tr>
<td><a id="agility"> </a>&nbsp;Agility</td>
<td><a id="empathy"> </a>&nbsp;Empathy</td>
<td><a id="excitement-seeking"> </a>&nbsp;Excitement Seeking</td>
</tr>
<tr>
<td><a id="toughness"> </a>&nbsp;Toughness</td>
<td><a id="social-awareness"> </a>&nbsp;Social Awareness</td>
<td><a id="friendliness"> </a>&nbsp;Friendliness</td>
</tr>
<tr>
<td><a id="endurance"> </a>&nbsp;Endurance</td>
<th>Personality Traits</th>
<td><a id="gregariousness"> </a>&nbsp;Gregariousness</td>
</tr>
<tr>
<td><a id="disease-resistance"> </a>&nbsp;Disease Resistance</td>
<td><a id="achievement-striving"> </a>&nbsp;Achievement Striving</td>
<td><a id="imagination"> </a>&nbsp;Imagination</td>
</tr>
<tr>
<td><a id="recuperation"> </a>&nbsp;Recuperation</td>
<td><a id="activity-level"> </a>&nbsp;Activity Level</td>
<td><a id="immoderation"> </a>&nbsp;Immoderation</td>
</tr>
<tr>
<th>Soul Attributes</th>
<td><a id="adventurousness"> </a>&nbsp;Adventurousness</td>
<td><a id="intellectual-curiosity"> </a>&nbsp;Intellectual Curiosity</td>
</tr>
<tr>
<td><a id="analytical-ability"> </a>&nbsp;Analytical Ability</td>
<td><a id="altruism"> </a>&nbsp;Altruism</td>
<td><a id="liberalism"> </a>&nbsp;Liberalism</td>
</tr>
<tr>
<td><a id="memory"> </a>&nbsp;Memory</td>
<td><a id="anger"> </a>&nbsp;Anger</td>
<td><a id="modesty"> </a>&nbsp;Modesty</td>
</tr>
<tr>
<td><a id="creatvity"> </a>&nbsp;Creativity</td>
<td><a id="anxiety"> </a>&nbsp;Anxiety</td>
<td><a id="orderliness"> </a>&nbsp;Orderliness</td>
</tr>
<tr>
<td><a id="intuition"> </a>&nbsp;Intuition</td>
<td><a id="artistic-interest"> </a>&nbsp;Artistic Interest</td>
<td><a id="self-consciousness"> </a>&nbsp;Self-Consciousness</td>
</tr>
<tr>
<td><a id="focus"> </a>&nbsp;Focus</td>
<td><a id="assertiveness"> </a>&nbsp;Assertiveness</td>
<td><a id="self-discipline"> </a>&nbsp;Self-Discipline</td>
</tr>
<tr>
<td><a id="willpower"> </a>&nbsp;Willpower</td>
<td><a id="cautiousness"> </a>&nbsp;Cautiousness</td>
<td><a id="self-efficacy"> </a>&nbsp;Self-Efficacy</td>
</tr>
<tr>
<td><a id="patience"> </a>&nbsp;Patience</td>
<td><a id="cheerfulness"> </a>&nbsp;Cheerfulness</td>
<td><a id="straightforwardness"> </a>&nbsp;Straightforwardness</td>
</tr>
<tr>
<td><a id="spatial-sense"> </a>&nbsp;Spatial Sense</td>
<td><a id="cooperation"> </a>&nbsp;Cooperation</td>
<td><a id="sympathy"> </a>&nbsp;Sympathy</td>
</tr>
<tr>
<td><a id="kinaesthetic-sense"> </a>&nbsp;Kinaesthetic Sense</td>
<td><a id="depression"> </a>&nbsp;Depression</td>
<td><a id="trust"> </a>&nbsp;Trust</td>
</tr>
<tr>
<td><a id="linguistic-ability"> </a>&nbsp;Linguistic Ability</td>
<td><a id="dutifulness"> </a>&nbsp;Dutifulness</td>
<td><a id="vulnerability"> </a>&nbsp;Vulnerability</td>
</tr>
</table>
<script type="text/javascript">
<!--

xmlUpdate();
attributeUpdate();
traitUpdate();
setColors();

//-->
</script>

<h3>Instructions</h3>
<p>
Enter your dwarf's name and gender to customize report.<br>
Load from XML instructions in attached README.<br>
Ctrl-click in Find Best Among to select additional dwarf. Shift-click to select range of dwarves.<br>
View your dwarf's thoughts and preferences, and enter those phrases that reflect the level of an attribute or trait. The Counselor will update to an approximate value.<br>
Tell the Counselor "average &lt;statname&gt;" and it'll return to default racial median. Try "strong", then "average strength". Refresh page to revert to average entirely.<br>
Alternatively, use Runesmith and Dwarf Therapist to find attributes and traits respectively, and update by hand.<br>
Runesmith/Dwarf Therapist trait names are those in parentheses in the dropdown.<br>

<h3>Thanks/Info</h3>
<p>
To <a href="http://www.bay12forums.com/smf/index.php?topic=72616.0">Urist Da Vinci</a> for SCIENCE<br>
<a href="http://df.magmawiki.com/">The Dwarf Fortress Wiki</a> for all the intel.<br>
<a href="http://code.google.com/p/dwarftherapist/">Dwarf Therapist</a> for helping me manage my dwarfs.<br>
<a href="http://dffd.wimbli.com/file.php?id=2538">Runesmith</a> for that next level of fortress control.<br>
And of course <a href="http://bay12games.com/dwarves/">Bay 12 Games</a> themselves, for allowing me to build and discard so many worlds.<br>
<p>
I am <a href="http://www.bay12forums.com/smf/index.php?action=profile;u=16843">knaveofstaves</a>, and this is <a href="http://www.bay12forums.com/smf/index.php?topic=83112">the DGC forum thread.</a><br>
<a href="http://dffd.wimbli.com/file.php?id=4238">Dwarven Guidance Counselor</a> project page at the Dwarf Fortress File Depot.<br>
DGC 0.0.6 was tested against Firefox 4.0.1 and Internet Explorer 9.0.8, and designed with Dwarf Fortress 0.31.21, Dwarf Therapist 0.6.10, and Runesmith 0.1.9.

</body>
</html>